<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- Chrome, Firefox OS and Opera Status Bar Color -->
<meta name="theme-color" content="#FFFFFF">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css">
<!-- ------- for latex â†‘  -->
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css">
<link rel="stylesheet" type="text/css" href="css/SourceSansPro.css">
<link rel="stylesheet" type="text/css" href="css/theme.css">
<link rel="stylesheet" type="text/css" href="css/notablog.css">
<link rel="stylesheet" type="text/css" href="css/CustomSetting.css">
<!-- Favicon -->

<link rel="shortcut icon" href="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;ğŸ¥¥&lt;/text&gt;&lt;/svg&gt;">

<style>
  :root {
    font-size: 20px;
  }
</style>
  <title>å¼€å‘ Rust std åº”ç”¨&nbsp;|&nbsp;413â€™s Website</title>
  <meta property="og:type" content="blog">
  <meta property="og:title" content="å¼€å‘ Rust std åº”ç”¨">
  
  
    <meta property="og:image" content="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;ğŸ¦€&lt;/text&gt;&lt;/svg&gt;">
  
  <style>
    .DateTagBar {
      margin-top: 1.0rem;
    }
  </style>
</head>

<body>
  <nav class="Navbar">
  <a href="index.html">
    <div class="Navbar__Btn">
      
      <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;ğŸ¥¥&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
      
      <span>Home</span>
    </div>
  </a>
  
  
  
  
  
  
  
  
  <span class="Navbar__Delim">&centerdot;</span>
  <a href="Note.html">
    <div class="Navbar__Btn">
      
      <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;ğŸ¶&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
      
      <span>Note</span>
    </div>
  </a>
  
  
  
  
  
  
  
  
  
  
  
  <span class="Navbar__Delim">&centerdot;</span>
  <a href="reference.html">
    <div class="Navbar__Btn">
      
      <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;ğŸ˜·&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
      
      <span>æ‚é¡¹</span>
    </div>
  </a>
  
  
  
  <span class="Navbar__Delim">&centerdot;</span>
  <a href="About.html">
    <div class="Navbar__Btn">
      
      <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;ğŸ¤“&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
      
      <span>About</span>
    </div>
  </a>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <span class="Navbar__Delim">&centerdot;</span>
  <a href="OV-start.html">
    <div class="Navbar__Btn">
      
      <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;â˜ï¸&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
      
      <span>OneDrive Vercel  ç«‹å³ä¸Šæ‰‹</span>
    </div>
  </a>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <span class="Navbar__Delim">&centerdot;</span>
  <a href="blog-collection.html">
    <div class="Navbar__Btn">
      
      <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;ğŸ¥…&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
      
      <span>blog mark</span>
    </div>
  </a>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
</nav>
  <header class="Header">
    
    <div class="Header__Spacer Header__Spacer--NoCover">
    </div>
    
      <div class="Header__Icon">
        <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;ğŸ¦€&lt;/text&gt;&lt;/svg&gt;"></span>
      </div>
    
    <h1 class="Header__Title">å¼€å‘ Rust std åº”ç”¨</h1>
    
      <div class="DateTagBar">
        
          <span class="DateTagBar__Item DateTagBar__Date">Posted on Mon, Sep 2, 2024</span>
        
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--gray">
            <a href="tag/Rust.html">Rust</a>
          </span>
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--red">
            <a href="tag/å•ç‰‡æœº.html">å•ç‰‡æœº</a>
          </span>
        
      </div>
    
  </header>
    <div id="content-html"></div>
  <article id="https://www.notion.so/a44047adc2454ddd9d5876bf56da3cb2" class="PageRoot PageRoot--FullWidth"><h2 id="https://www.notion.so/ccd95b333796404b85b472ab6a46c8e8" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/ccd95b333796404b85b472ab6a46c8e8"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">å¯¹äº std åº”ç”¨</mark></span></span></h2><div id="https://www.notion.so/78d7257e53f34de3b0abbcc6434700e3" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/0199f593023745cf94f2b0ca63260ce2" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">å¯¹äº std åº”ç”¨, æ ¸å¿ƒæ˜¯ä½¿ç”¨ esp-idf-sys å’Œå®ƒç»‘å®šé“¾æ¥åˆ°çš„ C/C++ åº“ esp-idfã€‚</mark></span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/4bc2d98cd70c4a7abc45ad063d5397c4" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">æ„å»ºçš„ target æ˜¯ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">xtensa-esp32s3-espidf</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">, è€Œ non_std åº”ç”¨çš„ target æ˜¯ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">xtensa-esp32s3-none-elf</code></mark></span></span></li></ul><div id="https://www.notion.so/28f43bfa31a14992b87f79a6b4214b8e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">esp-idf æ˜¯ C/C++ å¼€å‘çš„ï¼Œè¿è¡Œ FreeRTOS æ“ä½œç³»ç»Ÿï¼Œä¸º Rust std æä¾›äº† newlib enviroment å®ç°ï¼ˆ~/.rustup/toolchains/esp ç›®å½•ï¼‰ï¼Œ</mark></span></span></p></div><div id="https://www.notion.so/e45ccb0bf58f44ee84697be4f1fe39de" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">è¿™æ · std åº”ç”¨å¯ä»¥ä½¿ç”¨ Rust æ ‡å‡†åº“çš„å„ç§ç±»å‹å’Œç‰¹æ€§ï¼Œå¦‚ Vec/HashMap/Boxï¼Œnetï¼Œheap å†…å­˜åˆ†é…ã€thread/Mutex ç­‰ï¼›</mark></span></span></p></div><div id="https://www.notion.so/16ef07454e8544228172fe7f7cc3cb29" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/5ef9cf9f530e4b2b94bf5d46810a7fcf" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">Rust std åº”ç”¨ä¸ esp-idf ä¹‹é—´çš„ 3 ç§äº’æ“ä½œæ–¹å¼ï¼ˆè¿™äº› std åº“æƒ¯ä¾‹æ˜¯ esp-idf- å¼€å¤´ï¼‰ï¼š</mark></span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/516595c4512c4cacb38e1f6056ba0fea" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">esp-idf-sys</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> crateï¼šesp-idf çš„ unsafe bindingï¼ŒGives </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">raw (unsafe) access</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> to drivers, Wi-Fi and more.</mark></span></span></li><li id="https://www.notion.so/3c9a32d8a709463890acfb7c009fa55f" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">esp-idf-svc</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> crateï¼šesp-idf çš„ safe bindingï¼ŒæŠ½è±¡å±‚æ¬¡æ›´é«˜ï¼Œå®ç°äº† embedded-svc traitã€‚</mark></span></span></li><li id="https://www.notion.so/5abb9c8ef1df43d6ac80343d5b2bc781" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">esp-idf-hal</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> crateï¼šå®ç°äº† </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">embedded-hal</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> traitï¼Œæ”¯æŒ asyncï¼Œåº•å±‚ä¹Ÿæ˜¯åŸºäº esp-idfï¼›</mark></span></span></li></ol><div id="https://www.notion.so/538e05b9c3ab4af28541f699cf5265b1" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">å®ƒä»¬ä¹‹é—´çš„å±‚æ¬¡å…³ç³»: </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">esp-idf-svc -&gt; esp-idf-hal -&gt; esp-idf-sys(esp-idf çš„ Rust binding).</code></mark></span></span></p></div><div id="https://www.notion.so/5604fdf9b9524a58b61cf7db13f43aef" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/ec021a1b94d641a38ce9899c5753504e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">embedded-hal å’Œ embedded-svc æ˜¯ Rust embedded workgroup å®šä¹‰çš„å‚å•†ä¸­ç«‹çš„åµŒå…¥å¼è§„èŒƒ.</mark></span></span></p></div><div id="https://www.notion.so/f60d6f4c581948768906f45a948d89db" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/20b42927c42d47a4b56487a4c4e1dbea" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">ç¼–è¯‘ esp-idf-sys æ—¶, build.rs ä¼šä¼šè‡ªåŠ¨ä¸‹è½½/å®‰è£…/é…ç½®/ç¼–è¯‘å’Œé“¾æ¥ esp-idf åº“ï¼Œ</mark></span></span></p></div><div id="https://www.notion.so/ceea135938fc4f969455387fae26a030" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">å®‰è£…åˆ° $ESP_IDF_TOOLS_INSTALL_DIR ä½ç½®ï¼Œé»˜è®¤ä¸º by é¡¹ç›®çš„ .embuild/espressif ç›®å½•ã€‚</mark></span></span></p></div><div id="https://www.notion.so/ae5f7d29feae48fa8994b9a622d7375c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/7da2510ca12f415a8420555252156a23" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">esp-idf-sys é»˜è®¤å¯ç”¨ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">esp-idf</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> æ‰€æœ‰çš„ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">Component</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">ï¼ˆé™æ€åº“çš„å½¢å¼ï¼‰ ï¼Œè¿™æ ·å¯ä»¥åç»­ç›´æ¥é“¾æ¥ä»–ä»¬(åç»­ä¹Ÿå¯ä»¥é€šè¿‡ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">esp_idf_components</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">, $ESP_IDF_COMPONENTS æ¥é…ç½®ï¼‰ã€‚</mark></span></span></p></div><div id="https://www.notion.so/3a82cf266650403cb88749f68b64b18f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/e8e9e9803ad74560ab8ee603ead80de4" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">esp-idf-sys ä¹Ÿæ”¯æŒæ·»åŠ æœ¬åœ°å’Œè¿œç¨‹çš„ C/C++ Componentï¼Œåœ¨æ„å»º esp-idf-sys æ—¶è‡ªåŠ¨ä½¿ç”¨ bindgen å°†å®ƒå°è£…ä¸ºRust æ¥å£ï¼Œåç»­è‡ªåŠ¨é“¾æ¥åˆ°å¯æ‰§è¡Œç¨‹åºä¸­ã€‚ï¼ˆå‚è€ƒåæ–‡ï¼‰ã€‚</mark></span></span></p></div><div id="https://www.notion.so/190fc3f52a8880debe0ec7ea2d5f6b34" class="Image Image--Normal"><figure><a href="attachment:fdc7d164-d9c5-45ee-a354-d0b025c45732:image(1).png?width=528"><img src="attachment:fdc7d164-d9c5-45ee-a354-d0b025c45732:image(1).png?width=528" style="width:528px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/8988f79369ae42ea91cf6c52eb94ffc9" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/f023daaf8c6144708dd02ff910ea8d89" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">å¦‚æœ esp-idf-hal ä¸æ»¡è¶³éœ€æ±‚ï¼ˆå¦‚ç¼ºå°‘ä¸€äº› esp32 çš„å¯„å­˜å™¨çš„æ“ä½œï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">esp-rs/esp-pacs</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> ä¸‹çš„</mark></span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/esp-rs/esp-pacs/tree/main/esp32s3"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">esp32s3 create</mark></a></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">, å®ƒæ˜¯ä½¿ç”¨ svd2rust å·¥å…·æ¥åŸºäºèŠ¯ç‰‡çš„ svd è‡ªåŠ¨ç”Ÿæˆçš„åº“ã€‚</mark></span></span></p></div><div id="https://www.notion.so/f5c587b30830446e82c05ed4aea5a4b6" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/d88b3760cd9c41dba8486886955a80ed" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://apollolabsblog.hashnode.dev/the-embedded-rust-esp-development-ecosystem"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">https://apollolabsblog.hashnode.dev/the-embedded-rust-esp-development-ecosystem</mark></a></span></span></p></div><div id="https://www.notion.so/190fc3f52a8880e3815adb08f8fa7d0b" class="Image Image--Normal"><figure><a href="attachment:cae98e63-d9a9-4fff-86dd-709ef6f5834a:image.png?width=432"><img src="attachment:cae98e63-d9a9-4fff-86dd-709ef6f5834a:image.png?width=432" style="width:432px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/190fc3f52a888065ad34c0e93365f673" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h2 id="https://www.notion.so/cb2b2b479ff24841b42b95c834da4dd8" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/cb2b2b479ff24841b42b95c834da4dd8"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">ä½¿ç”¨ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/esp-rs/esp-idf-template/blob/master/README.md">esp-rs/esp-idf-template</a></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> æ¨¡æ¿</mark></span></span></h2><div id="https://www.notion.so/9622a02da7ba4b44b4e21b837b3737e4" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/485dc9a3c40246d19057da1936a957cd" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">ä½¿ç”¨ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/esp-rs/esp-idf-template/blob/master/README.md">esp-rs/esp-idf-template</a></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> æ¨¡æ¿æ¥åˆ›å»º std åº”ç”¨:</mark></span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/25557e25f987437294e392e34b9a092d" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">åœ¨ç¼–è¯‘ esp-idf-sys æ—¶è‡ªåŠ¨ä¸‹è½½å’Œå®‰è£… esp-idf æ¡†æ¶åˆ°é¡¹ç›®çš„ .embuild/espressif/esp-idf ç›®å½•ä¸‹;</mark></span></span></li><li id="https://www.notion.so/95e112050a494112b7a8641b10450a35" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">å¯ä»¥é…ç½®é¡¹ç›®çš„ .cargo/config.toml æ–‡ä»¶, æ·»åŠ  env ESP_IDF_TOOLS_INSTALL_DIR = â€œglobalâ€ æ¥ä½¿ç”¨å…¨å±€ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">~/.espressif/</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> ä¸‹çš„ esp-idf å·¥å…·é“¾(å»ºè®®).</mark></span></span></li><li id="https://www.notion.so/a8302da8b5b44f6aa3ec9d792677e8c8" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">sdkconfig.defaults æ–‡ä»¶ä¸º esp-idf çš„ç¼ºçœå‚æ•°æä¾› override å‚æ•°å¦‚ stack size, log levelï¼›</mark></span></span></li></ul><div id="https://www.notion.so/8c41da884a904156856e252243de4fd2" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><pre id="https://www.notion.so/8d291386249749948500891bfda25adb" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>zj@a:~/codes/esp32/$ <span class="token function">cargo</span> generate esp-rs/esp-idf-template <span class="token function">cargo</span>
âš ï¸   Favorite <span class="token variable"><span class="token variable">`</span>esp-rs/esp-idf-template<span class="token variable">`</span></span> not found <span class="token keyword">in</span> config, using it as a <span class="token function">git</span> repository: https://github.com/esp-rs/esp-idf-template.git
ğŸ”§   project-name: myesp <span class="token punctuation">..</span>.
ğŸ”§   Generating template <span class="token punctuation">..</span>.
âœ” ğŸ¤·   Which MCU to target? Â· esp32s3
âœ” ğŸ¤·   Configure advanced template options? Â· <span class="token boolean">true</span>
âœ” ğŸ¤·   Enable STD support? Â· <span class="token boolean">true</span>
âœ” ğŸ¤·   Configure project to use Dev Containers <span class="token punctuation">(</span>VS Code and GitHub Codespaces<span class="token punctuation">)</span>? Â· <span class="token boolean">false</span>
âœ” ğŸ¤·   Configure project to support Wokwi simulation with Wokwi VS Code extension? Â· <span class="token boolean">false</span>
âœ” ğŸ¤·   Add CI files <span class="token keyword">for</span> GitHub Action? Â· <span class="token boolean">false</span>
âœ” ğŸ¤·   ESP-IDF version <span class="token punctuation">(</span>master <span class="token operator">=</span> UNSTABLE<span class="token punctuation">)</span> Â· v5.1
ğŸ”§   Moving generated files into: <span class="token variable"><span class="token variable">`</span>/Users/zhangjun/codes/esp32/esp-demo2/myesp<span class="token variable">`</span></span><span class="token punctuation">..</span>.
ğŸ”§   Initializing a fresh Git repository
âœ¨   Done<span class="token operator">!</span> New project created /Users/zhangjun/codes/esp32/esp-demo2/myesp

zj@a:~/codes/esp32/$ <span class="token builtin class-name">cd</span> myesp

zj@a:~/code/esp32/std/myespv4$ <span class="token function">cat</span> src/main.rs
fn <span class="token function-name function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    // It is necessary to call this <span class="token keyword">function</span> once. Otherwise some patches to the runtime
    // implemented by esp-idf-sys might not <span class="token function">link</span> properly. See https://github.com/esp-rs/esp-idf-template/issues/71
    esp_idf_svc::sys::link_patches<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    // Bind the log crate to the ESP Logging facilities
    esp_idf_svc::log::EspLogger::initialize_default<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    log::info<span class="token operator">!</span><span class="token punctuation">(</span><span class="token string">"Hello, world!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></span></span></span></code></pre><h3 id="https://www.notion.so/32020fd8821a4a4d9e0852a204bbec46" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/32020fd8821a4a4d9e0852a204bbec46"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">æŒ‰éœ€ä¿®æ”¹ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">Cargo.toml</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">ï¼š</mark></span></span></h3><div id="https://www.notion.so/1f3f8b7f0d3b40aeb1115b1a95304037" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><pre id="https://www.notion.so/bf420770642248ac910e0abecc86ad9f" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>zj@a:~/code/esp32/std/myesp$ cat Cargo<span class="token punctuation">.</span>toml
<span class="token punctuation">[</span><span class="token table class-name">package</span><span class="token punctuation">]</span>
<span class="token key property">name</span> <span class="token punctuation">=</span> <span class="token string">"myesp"</span>
<span class="token key property">version</span> <span class="token punctuation">=</span> <span class="token string">"0.1.0"</span>
<span class="token key property">authors</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"alizj"</span><span class="token punctuation">]</span>
<span class="token key property">edition</span> <span class="token punctuation">=</span> <span class="token string">"2021"</span> 
<span class="token key property">resolver</span> <span class="token punctuation">=</span> <span class="token string">"2"</span>
<span class="token key property">rust-version</span> <span class="token punctuation">=</span> <span class="token string">"1.71"</span>

<span class="token punctuation">[</span><span class="token table class-name">profile.release</span><span class="token punctuation">]</span>
<span class="token key property">opt-level</span> <span class="token punctuation">=</span> <span class="token string">"s"</span>

<span class="token punctuation">[</span><span class="token table class-name">profile.dev</span><span class="token punctuation">]</span>
<span class="token key property">debug</span> <span class="token punctuation">=</span> <span class="token boolean">true</span>    <span class="token comment"># Symbols are nice and they don't increase the size on Flash</span>
<span class="token key property">opt-level</span> <span class="token punctuation">=</span> <span class="token string">"z"</span>

<span class="token punctuation">[</span><span class="token table class-name">features</span><span class="token punctuation">]</span>
<span class="token comment"># ç¼ºçœ featuresï¼šé‡ç‚¹æ˜¯åŒ…å« std å’Œ esp-idf-svc/native</span>
<span class="token comment"># esp-idf-svc/native æŒ‡çš„æ˜¯ native å¹³å°ç±»å‹ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜æœ‰ pio å¹³å°ç±»å‹ã€‚</span>
<span class="token key property">default</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"std"</span><span class="token punctuation">,</span> <span class="token string">"embassy"</span><span class="token punctuation">,</span> <span class="token string">"esp-idf-svc/native"</span><span class="token punctuation">]</span>
<span class="token comment"># std åŒ…å« alloc å’Œ esp-idf-svc/std</span>
<span class="token key property">std</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"alloc"</span><span class="token punctuation">,</span> <span class="token string">"esp-idf-svc/binstart"</span><span class="token punctuation">,</span> <span class="token string">"esp-idf-svc/std"</span><span class="token punctuation">]</span>
<span class="token comment"># alloc ä¾èµ– esp-idf-svc/alloc</span>
<span class="token key property">alloc</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"esp-idf-svc/alloc"</span><span class="token punctuation">]</span>
<span class="token comment"># embassy ä¹Ÿä»…ä¾èµ– esp-idf-svc</span>
<span class="token key property">embassy</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"esp-idf-svc/embassy-sync"</span><span class="token punctuation">,</span> <span class="token string">"esp-idf-svc/critical-section"</span><span class="token punctuation">,</span> <span class="token string">"esp-idf-svc/embassy-time-driver"</span><span class="token punctuation">]</span>
<span class="token comment"># æ€»ç»“ï¼šcargo gen é€šè¿‡æ¨¡æ¿åˆ›å»ºçš„ std åº”ç”¨ä»…ä¾èµ– std å’Œ esp-idf-svc</span>

<span class="token key property">pio</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"esp-idf-svc/pio"</span><span class="token punctuation">]</span>
<span class="token key property">nightly</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"esp-idf-svc/nightly"</span><span class="token punctuation">]</span>
<span class="token key property">experimental</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"esp-idf-svc/experimental"</span><span class="token punctuation">]</span>

<span class="token punctuation">[</span><span class="token table class-name">dependencies</span><span class="token punctuation">]</span>
<span class="token comment"># é€šè¿‡ log æ‰“å°æ—¥å¿—ï¼Œesp-idf-svc æä¾›äº† log çš„å…·ä½“å®ç°</span>
<span class="token key property">log</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span> <span class="token key property">version</span> <span class="token punctuation">=</span> <span class="token string">"0.4"</span><span class="token punctuation">,</span> <span class="token key property">default-features</span> <span class="token punctuation">=</span> <span class="token boolean">false</span> <span class="token punctuation">}</span>
<span class="token comment"># std ç±»å‹çš„ crate</span>
<span class="token key property">esp-idf-svc</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span> <span class="token key property">version</span> <span class="token punctuation">=</span> <span class="token string">"0.48"</span><span class="token punctuation">,</span> <span class="token key property">default-features</span> <span class="token punctuation">=</span> <span class="token boolean">false</span> <span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token table class-name">build-dependencies</span><span class="token punctuation">]</span> <span class="token comment"># build.rs ç¼–è¯‘è„šæœ¬çš„ä¾èµ–</span>
<span class="token key property">embuild</span> <span class="token punctuation">=</span> <span class="token string">"0.31.3"</span>   <span class="token comment"># build.rs ä¾èµ– embuild</span></span></span></span></code></pre><h3 id="https://www.notion.so/db9b662178504b609e66c7a0737ab6f4" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/db9b662178504b609e66c7a0737ab6f4"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">ä¿®æ”¹ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">.cargo/config.toml</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> </mark></span></span></h3><div id="https://www.notion.so/715362909b1f4c32ac2c06f4f0292b09" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/5447a8a58a1543b487735e2f5cf01424" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">ä¿®æ”¹ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">.cargo/config.toml</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">æ–‡ä»¶ä¸­çš„ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">ESP_IDF_VERSION</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> ä¸ºæœ€æ–°ç‰ˆæœ¬ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</mark></span></span></p></div><div id="https://www.notion.so/59f18b8026744178ae9f671930ebadb0" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><pre id="https://www.notion.so/843707f332d240fa8775956c8a6792d0" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>zj@a:~/codes/esp32/myesp$ cat <span class="token punctuation">.</span>cargo/config<span class="token punctuation">.</span>toml
<span class="token punctuation">[</span><span class="token table class-name">build</span><span class="token punctuation">]</span>
<span class="token key property">target</span> <span class="token punctuation">=</span> <span class="token string">"xtensa-esp32s3-espidf"</span>  <span class="token comment"># è¦æ„å»ºçš„ targetï¼Œè¿™é‡Œä½¿ç”¨é“¾æ¥ esp-idf çš„ target</span>
 
<span class="token punctuation">[</span><span class="token table class-name">target.xtensa-esp32s3-espidf</span><span class="token punctuation">]</span>  <span class="token comment"># target å¯¹åº”çš„é…ç½®</span>
<span class="token key property">linker</span> <span class="token punctuation">=</span> <span class="token string">"ldproxy"</span> <span class="token comment"># ä½äº ~/.cargo/bin/</span>
<span class="token comment"># runner = "espflash --monitor" # Select this runner for espflash v1.x.x</span>
<span class="token key property">runner</span> <span class="token punctuation">=</span> <span class="token string">"espflash flash --monitor"</span> <span class="token comment"># Select this runner for espflash v2.x.x</span>
<span class="token key property">rustflags</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span> <span class="token string">"--cfg"</span><span class="token punctuation">,</span>  <span class="token string">"espidf_time64"</span><span class="token punctuation">]</span> <span class="token comment"># Extending time_t for ESP IDF 5: https://github.com/esp-rs/rust/issues/110</span>

<span class="token punctuation">[</span><span class="token table class-name">unstable</span><span class="token punctuation">]</span>
<span class="token key property">build-std</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"std"</span><span class="token punctuation">,</span> <span class="token string">"panic_abort"</span><span class="token punctuation">]</span>  <span class="token comment"># æ„å»ºå’Œä½¿ç”¨ stdï¼ˆå¯¹äº no_std æ˜¯ coreï¼‰</span>

<span class="token punctuation">[</span><span class="token table class-name">env</span><span class="token punctuation">]</span>  <span class="token comment"># è¢« embuild ä½¿ç”¨çš„ç¯å¢ƒå˜é‡</span>
<span class="token key property">MCU</span><span class="token punctuation">=</span><span class="token string">"esp32s3"</span>
<span class="token comment"># Note: this variable is not used by the pio builder (`cargo build --features pio`)</span>
<span class="token key property">ESP_IDF_VERSION</span> <span class="token punctuation">=</span> <span class="token string">"v5.2.1"</span>
<span class="token comment"># ä½¿ç”¨å…¨å±€ ~/.espressif/ å·¥å…·é“¾ï¼Œé»˜è®¤æ˜¯ by é¡¹ç›® workspace çš„ã€‚</span>
<span class="token key property">ESP_IDF_TOOLS_INSTALL_DIR</span> <span class="token punctuation">=</span> <span class="token string">"global"</span></span></span></span></code></pre><div id="https://www.notion.so/0979d72666774ccc8af475b1b2ce2f22" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h3 id="https://www.notion.so/9662be3579fc44bd84b1dcceace26e5a" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/9662be3579fc44bd84b1dcceace26e5a"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">æŒ‰éœ€ä¿®æ”¹ esp-idf çš„é…ç½®å‚æ•°æ–‡ä»¶</mark></span></span></h3><div id="https://www.notion.so/c49c836a66b6414bbd315f878f826381" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/fc61da8ff2ca47eaacc8370f416d9cf5" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">æŒ‰éœ€ä¿®æ”¹ esp-idf çš„é…ç½®å‚æ•°æ–‡ä»¶ï¼š</mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">sdkconfig.defaults</code></mark></span></span></p></div><pre id="https://www.notion.so/7672e29c7e5141178172f532fcd69c26" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>zj@a:~/docs$ <span class="token function">cat</span> ~/code/esp32/std/myespv2/sdkconfig.defaults
<span class="token comment"># Rust often needs a bit of an extra main task stack size compared to C (the default is 3K)</span>
<span class="token assign-left variable">CONFIG_ESP_MAIN_TASK_STACK_SIZE</span><span class="token operator">=</span><span class="token number">8000</span> 

<span class="token comment"># Use this to set FreeRTOS kernel tick frequency to 1000 Hz (100 Hz by default).</span>
<span class="token comment"># This allows to use 1 ms granuality for thread sleeps (10 ms by default).</span>
<span class="token comment">#CONFIG_FREERTOS_HZ=1000</span>

<span class="token comment"># Workaround for https://github.com/espressif/esp-idf/issues/7631</span>
<span class="token comment">#CONFIG_MBEDTLS_CERTIFICATE_BUNDLE=n</span>
<span class="token comment">#CONFIG_MBEDTLS_CERTIFICATE_BUNDLE_DEFAULT_FULL=n</span></span></span></span></code></pre><h3 id="https://www.notion.so/a58d875ced0c441fb32f5a70fbef40ce" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/a58d875ced0c441fb32f5a70fbef40ce"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">æŒ‰éœ€ä¿®æ”¹ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">rust-toolchain.toml</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> </mark></span></span></h3><div id="https://www.notion.so/0bfea64a42924ba191c9a4ab5ba52b39" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><pre id="https://www.notion.so/f50a038c89a94b17b4e9488bfa90e31e" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token comment"># esp32 rust é¡¹ç›®é€šè¿‡ rust-toolchain.toml æ¥é€‰æ‹© channel å’Œ target</span>
zj@a:~/code/esp32/myespv2$ cat rust-toolchain<span class="token punctuation">.</span>toml
<span class="token punctuation">[</span><span class="token table class-name">toolchain</span><span class="token punctuation">]</span> 
<span class="token key property">channel</span> <span class="token punctuation">=</span> <span class="token string">"esp"</span>  <span class="token comment"># ~/.rustup/toolchains/ ä¸‹çš„ç›®å½•åç§°ï¼Œè¿™é‡Œä½¿ç”¨ esp toolchain</span>

<span class="token comment"># ä½¿ç”¨ embuild crate æ¥å®‰è£…å’Œæ„å»º esp-idf framework</span>
<span class="token comment"># å¯¹äº non_std åº”ç”¨ï¼Œä¸ä¾èµ– esp-idfï¼Œ æ•…ä¸éœ€è¦ build.rs .</span>
zj@a:~/code/esp32/myespv2$ cat build<span class="token punctuation">.</span>rs
fn main() <span class="token punctuation">{</span>
    embuild::espidf::sysenv::output();
<span class="token punctuation">}</span></span></span></span></code></pre><h2 id="https://www.notion.so/46a6fccd60a748048f18ea57639baacd" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/46a6fccd60a748048f18ea57639baacd"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">æ„å»ºé¡¹ç›®ï¼š</mark></span></span></h2><ol class="NumberedListWrapper"><li id="https://www.notion.so/b855afd07b7c42a48c34d32318737c3a" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">æ¯æ¬¡æ„å»ºå‰éƒ½éœ€è¦å…ˆ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorRed"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">source ~/esp/export-esp.sh</strong></code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"> </strong></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">è„šæœ¬ã€‚</mark></span></span></li><li id="https://www.notion.so/d9d0604e04df4e0bbc275175f285face" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">ä¸èƒ½å¯ç”¨ python envï¼Œä¸èƒ½ä½¿ç”¨ socks ä»£ç†ï¼Œéœ€è¦è®¾ç½®ç¯å¢ƒå˜é‡ï¼›</mark></span></span></li><li id="https://www.notion.so/ba28990c2d5c43799deba11ee2f8c5ea" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">æ„å»ºè¿‡ç¨‹ä¸­é»˜è®¤ä¸‹è½½å’Œå®‰è£… </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">esp-idf </code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">åˆ° </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">workspace </code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">çš„ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">.embuild/espressif/ </code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">ç›®å½•ï¼›</mark></span></span></li></ol><div id="https://www.notion.so/d917cef53a244224bf2bd77f83e2e3f1" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> </mark></span></span></p></div><pre id="https://www.notion.so/03ec2bbb6b294620b87811ec548d21df" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token comment"># æ„å»º std åº”ç”¨æ—¶ï¼Œä¸èƒ½ source source ~/esp/esp-idf/v5.2.1/export.sh æ–‡ä»¶ï¼Œå¦åˆ™ä¼šæ„å»ºå¤±è´¥ã€‚</span>
zj@a:~/code/esp32/myesp$ <span class="token builtin class-name">source</span> ~/esp/export-esp.sh
zj@a:~/code/esp32/myesp$ <span class="token function">cargo</span> build 

<span class="token comment"># by workspace å®‰è£…çš„ esp-idf åˆ° .embuild/espressif/ ç›®å½•</span>
zj@a:~/code/esp32/myespv2$ <span class="token function">ls</span> <span class="token parameter variable">-l</span> .embuild/espressif/
total <span class="token number">4</span>.0K
drwxr-xr-x <span class="token number">6</span> alizj  <span class="token number">192</span>  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:54 dist/
drwxr-xr-x <span class="token number">3</span> alizj   <span class="token number">96</span>  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:49 esp-idf/
-rw-r--r-- <span class="token number">1</span> alizj <span class="token number">2</span>.8K  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:51 espidf.constraints.v5.2.txt
drwxr-xr-x <span class="token number">3</span> alizj   <span class="token number">96</span>  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:51 python_env/
drwxr-xr-x <span class="token number">6</span> alizj  <span class="token number">192</span>  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:54 tools/

<span class="token comment"># dist ä¸‹è½½çš„å†…å®¹è¢«è§£å‹åˆ° .embuild/espressif/tools/ ç›®å½•</span>
zj@a:~/code/esp32/myespv2$ <span class="token function">ls</span> <span class="token parameter variable">-l</span> .embuild/espressif/dist/
total 193M
-rw-r--r-- <span class="token number">1</span> alizj  70M  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:52 cmake-3.24.0-macos-universal.tar.gz
-rw-r--r-- <span class="token number">1</span> alizj  15M  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:54 esp32ulp-elf-2.35_20220830-macos-arm64.tar.gz
-rw-r--r-- <span class="token number">1</span> alizj 271K  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:52 ninja-mac-v1.11.1.zip
-rw-r--r-- <span class="token number">1</span> alizj  96M  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:51 xtensa-esp-elf-13.2.0_20230928-aarch64-apple-darwin.tar.xz <span class="token comment"># äº¤å‰ç¼–è¯‘å·¥å…·é“¾</span>

zj@a:~/code/esp32/myespv2$ <span class="token function">ls</span> <span class="token parameter variable">-l</span> .embuild/espressif/tools/
total <span class="token number">0</span>
drwxr-xr-x <span class="token number">3</span> alizj <span class="token number">96</span>  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:52 cmake/
drwxr-xr-x <span class="token number">3</span> alizj <span class="token number">96</span>  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:54 esp32ulp-elf/ <span class="token comment"># ULP (Ultra-Low-Powered)</span>
drwxr-xr-x <span class="token number">3</span> alizj <span class="token number">96</span>  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:52 ninja/
drwxr-xr-x <span class="token number">3</span> alizj <span class="token number">96</span>  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:51 xtensa-esp-elf/

<span class="token comment"># esp-idf frameworkï¼Œè¢«å®‰è£…åˆ° python_env/ ç›®å½•</span>
zj@a:~/code/esp32/myespv2$ <span class="token function">ls</span> <span class="token parameter variable">-l</span> .embuild/espressif/esp-idf/v5.2.1/
total 172K
-rw-r--r--  <span class="token number">1</span> alizj  12K  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:49 CMakeLists.txt
-rw-r--r--  <span class="token number">1</span> alizj <span class="token number">4</span>.2K  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:49 COMPATIBILITY.md
-rw-r--r--  <span class="token number">1</span> alizj <span class="token number">4</span>.3K  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:49 COMPATIBILITY_CN.md
-rw-r--r--  <span class="token number">1</span> alizj  <span class="token number">314</span>  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:49 CONTRIBUTING.md
-rw-r--r--  <span class="token number">1</span> alizj  25K  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:49 Kconfig
-rw-r--r--  <span class="token number">1</span> alizj  12K  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:49 LICENSE
-rw-r--r--  <span class="token number">1</span> alizj <span class="token number">8</span>.9K  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:49 README.md
-rw-r--r--  <span class="token number">1</span> alizj <span class="token number">8</span>.8K  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:49 README_CN.md
-rw-r--r--  <span class="token number">1</span> alizj  <span class="token number">532</span>  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:49 SECURITY.md
-rw-r--r--  <span class="token number">1</span> alizj <span class="token number">3</span>.7K  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:49 SUPPORT_POLICY.md
-rw-r--r--  <span class="token number">1</span> alizj <span class="token number">3</span>.4K  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:49 SUPPORT_POLICY_CN.md
-rw-r--r--  <span class="token number">1</span> alizj  <span class="token number">721</span>  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:49 add_path.sh
drwxr-xr-x <span class="token number">81</span> alizj <span class="token number">2</span>.6K  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:49 components/
-rw-r--r--  <span class="token number">1</span> alizj  12K  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:49 conftest.py
drwxr-xr-x <span class="token number">15</span> alizj  <span class="token number">480</span>  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:49 docs/
drwxr-xr-x <span class="token number">22</span> alizj  <span class="token number">704</span>  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:49 examples/
-rw-r--r--  <span class="token number">1</span> alizj <span class="token number">3</span>.9K  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:49 export.bat
-rw-r--r--  <span class="token number">1</span> alizj <span class="token number">3</span>.7K  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:49 export.fish
-rw-r--r--  <span class="token number">1</span> alizj <span class="token number">3</span>.5K  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:49 export.ps1
-rw-r--r--  <span class="token number">1</span> alizj <span class="token number">8</span>.0K  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:49 export.sh
-rw-r--r--  <span class="token number">1</span> alizj <span class="token number">1</span>.8K  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:49 install.bat
-rwxr-xr-x  <span class="token number">1</span> alizj  <span class="token number">971</span>  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:49 install.fish*
-rw-r--r--  <span class="token number">1</span> alizj  <span class="token number">982</span>  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:49 install.ps1
-rwxr-xr-x  <span class="token number">1</span> alizj <span class="token number">1004</span>  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:49 install.sh*
-rw-r--r--  <span class="token number">1</span> alizj  <span class="token number">889</span>  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:49 pytest.ini
-rw-r--r--  <span class="token number">1</span> alizj <span class="token number">2</span>.0K  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:49 sdkconfig.rename
-rw-r--r--  <span class="token number">1</span> alizj  <span class="token number">530</span>  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:49 sonar-project.properties
drwxr-xr-x <span class="token number">47</span> alizj <span class="token number">1</span>.5K  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:51 tools/

zj@a:~/code/esp32/myesp$ <span class="token function">ls</span> target/
CACHEDIR.TAG  debug/  xtensa-esp32s3-espidf/</span></span></span></code></pre><div id="https://www.notion.so/95485c6430784605a7751ebad8b7ec4f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">æ„å»ºç»“æœä½äº </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">target/xtensa-esp32s3-espidf </code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">ç›®å½•ä¸‹ï¼š</mark></span></span></p></div><div id="https://www.notion.so/5cb519cbd08e47ebb41447595211fb57" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><pre id="https://www.notion.so/f937c1efbfd6460cba36d312876272e0" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>zj@a:~/code/esp32/myesp$ <span class="token function">ls</span> <span class="token parameter variable">-l</span> target/xtensa-esp32s3-espidf/debug/
total 11M 
-rw-r--r--   <span class="token number">1</span> alizj  21K  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:45 bootloader.bin <span class="token comment"># bootloader</span>
drwxr-xr-x  <span class="token number">18</span> alizj  <span class="token number">576</span>  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:39 build/
drwxr-xr-x <span class="token number">178</span> alizj <span class="token number">5</span>.6K  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:45 deps/
drwxr-xr-x   <span class="token number">2</span> alizj   <span class="token number">64</span>  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:39 examples/
drwxr-xr-x   <span class="token number">3</span> alizj   <span class="token number">96</span>  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:45 incremental/
-rwxr-xr-x   <span class="token number">1</span> alizj  11M  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:45 myesp*  <span class="token comment"># äºŒè¿›åˆ¶ç¨‹åº</span>
-rw-r--r--   <span class="token number">1</span> alizj  <span class="token number">153</span>  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:45 myesp.d
-rw-r--r--   <span class="token number">1</span> alizj <span class="token number">3</span>.0K  <span class="token number">5</span>  <span class="token number">5</span> <span class="token number">14</span>:45 partition-table.bin <span class="token comment"># åˆ†åŒºè¡¨</span>

zj@a:~/code/esp32/myesp$ <span class="token function">file</span> target/xtensa-esp32s3-espidf/debug/myesp
target/xtensa-esp32s3-espidf/debug/myesp: ELF <span class="token number">32</span>-bit LSB executable, Tensilica Xtensa, version <span class="token number">1</span> <span class="token punctuation">(</span>SYSV<span class="token punctuation">)</span>, statically linked, with debug_info, not stripped</span></span></span></code></pre><div id="https://www.notion.so/6d224196858443c6a64ffdd7ac54dd89" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorRed">æ„å»ºå¤±è´¥çš„è§£å†³åŠæ³•ï¼š</mark></span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/26277d2436194c0386182abd417f8fe1" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">cargo clen æ¸…ç† target ç›®å½•ï¼›</mark></span></span></li><li id="https://www.notion.so/47b1d4fcc0a3404b89d565434c131a6f" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">æ‰‹åŠ¨æ¸…ç† .embuild ç›®å½•ï¼›</mark></span></span></li><li id="https://www.notion.so/90e88007526940808e50fffd264c68e9" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">ä¸èƒ½å¯ç”¨ socks ä»£ç†ï¼›</mark></span></span></li><li id="https://www.notion.so/1f6c9cb0c60b4c8397f20e78f8fac23e" class="NumberedList" value="4"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">ä¸èƒ½å¼€å¯ python venvï¼›</mark></span></span></li></ol><div id="https://www.notion.so/cbdb3bbcfbb845fea025d356f85fb6c8" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> </mark></span></span></p></div><pre id="https://www.notion.so/19d66149f8c440889b9379163774e292" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>zj@a:~/code/esp32/myesp$ <span class="token function">cargo</span> clean
zj@a:~/code/esp32/myesp$ <span class="token function">rm</span> <span class="token parameter variable">-rf</span> .embuild/
zj@a:~/code/esp32/myesp$ <span class="token function">ls</span>
Cargo.lock  Cargo.toml  build.rs  rust-toolchain.toml  sdkconfig.defaults  src/
zj@a:~/code/esp32/myesp$ <span class="token function">cargo</span> build
 
<span class="token comment"># cargo build ä¼šå®‰è£… esp-idfï¼ŒæœŸé—´ä¼šå®‰è£… python venv å’ŒæŒ‰ç…§ python åŒ…ã€‚æ‰€ä»¥ï¼Œä¸èƒ½ä½¿ç”¨ python ä¸æ”¯</span>
<span class="token comment"># æŒçš„ socks ä»£ç†ï¼Œä¹Ÿä¸èƒ½å¯ç”¨ python envã€‚</span>
zj@a:~/code/esp32/$ enable_http_proxy
zj@a:~/code/esp32/$ <span class="token builtin class-name">export</span> <span class="token assign-left variable">DIR_TO_REMOVE</span><span class="token operator">=</span>/Users/alizj/.venv/bin
zj@a:~/code/esp32/$ <span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> <span class="token environment constant">$PATH</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token parameter variable">-e</span> <span class="token string">"s;:<span class="token variable">$DIR_TO_REMOVE</span>;;"</span> <span class="token parameter variable">-e</span> <span class="token string">"s;<span class="token variable">$DIR_TO_REMOVE</span>:;;"</span> <span class="token parameter variable">-e</span> <span class="token string">"s;<span class="token variable">$DIR_TO_REMOVE</span>;;"</span><span class="token variable">)</span></span>

<span class="token comment"># å¦‚æœæ˜¯ Mac M1 ç¬”è®°æœ¬ï¼Œéœ€è¦ç»™ cargo build æ·»åŠ ç¯å¢ƒå˜é‡ CRATE_CC_NO_DEFAULTS=1ï¼Œå¦åˆ™ä¼šæ„å»ºå¤±è´¥ï¼ŒæŠ¥é”™ï¼š</span>
<span class="token comment"># xtensa-esp-elf-gcc: error: unrecognized command-line option '--target=xtensa-esp32s3-espidf'</span>
<span class="token comment"># å‚è€ƒï¼šhttps://github.com/rust-lang/cc-rs/issues/1005</span>
zj@a:~/code/esp32/$ <span class="token builtin class-name">export</span> <span class="token assign-left variable">CRATE_CC_NO_DEFAULTS</span><span class="token operator">=</span><span class="token number">1</span></span></span></span></code></pre><div id="https://www.notion.so/c0ece58ad1ea48b49766c66d8fb1dcde" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">å‚è€ƒï¼š</mark></span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/8f9a6a5af25949f6a486b90bd9a6e8ba" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://docs.esp-rs.org/std-training/01_intro.html"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">https://docs.esp-rs.org/std-training/01_intro.html</mark></a></span></span></li><li id="https://www.notion.so/f112f5c8e0f94b219f623f78fee1798f" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/esp-rs/std-training"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">https://github.com/esp-rs/std-training</mark></a></span></span></li><li id="https://www.notion.so/89ae750444de4f5e8c0909ba8ec238cb" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/danclive/esp-examples/tree/main"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">https://github.com/danclive/esp-examples/tree/main</mark></a></span></span></li></ol><div id="https://www.notion.so/eafb9214c85345b28582674a872e1fcd" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h2 id="https://www.notion.so/8885e11752484ec4a677b2f5adbb9a0a" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/8885e11752484ec4a677b2f5adbb9a0a"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">1 ä¸º Rust std åº”ç”¨æ·»åŠ ç»„ä»¶ component </mark></span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://blog.opsnull.com/rust-embedded/esp-rs-std-app/#%E4%B8%BA-rust-std-%E5%BA%94%E7%94%A8%E6%B7%BB%E5%8A%A0%E7%BB%84%E4%BB%B6-component"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">#</mark></a></span></span></h2><div id="https://www.notion.so/c72abda1f7244294bd35218286228e83" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">ä½¿ç”¨ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">cargo build</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> æ„å»ºåŸºäº </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">eps-idf-sys</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> çš„ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">std</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> åº”ç”¨æ—¶, </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">build.rs</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> æ„å»ºè„šæœ¬æ‰§è¡Œçš„ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">embuild crate</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> ä¼šä¸‹è½½ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">esp-idf</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> åº“ï¼Œä½¿ç”¨ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">bindgen</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> æ¥ç”Ÿæˆ</mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code"> Rust</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> æ¥å£ï¼Œå°†ç¼–è¯‘åçš„ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">component</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> é™æ€åº“é“¾æ¥åˆ° Rust å¯æ‰§è¡Œç¨‹åºã€‚</mark></span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/95369a641e2a46098cf3bcbe3ad7b0d2" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">Rust ä¹ æƒ¯ä½¿ç”¨</mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code"> xx-sys</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> æ¥å‘½åå…¶ä»–è¯­è¨€</mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code"> xx </code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">é¡¹ç›®çš„ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">Rust wrapper</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">ï¼Œæ‰€ä»¥ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">esp-idf-sys</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> æ˜¯ C é¡¹ç›®</mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code"> esp-idf</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> çš„ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">Rust wrapper</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">ã€‚</mark></span></span><div id="https://www.notion.so/6ef2b96d06654c88b77d6c6cd462a1cf" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">esp-idf</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> å†…ç½®äº†å¤§é‡ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">component</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">ï¼ŒåŒæ—¶ç¤¾åŒºå’Œ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">component registry </code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">ä¸Šè¿˜æœ‰å¤§é‡å…¶ä»– </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">component </code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">å¯ä¾›ä½¿ç”¨ã€‚</mark></span></span></p></div></li></ul><div id="https://www.notion.so/b9028040a13c40a585c80dd57ef22943" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">å†…ç½®</mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code"> component</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> çš„ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">bindgen</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> ç”± </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">esp-idf-sys</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> çš„ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/esp-rs/esp-idf-sys/blob/master/src/include/esp-idf/bindings.h">bindings.h</a></code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code"> </code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">å¤´æ–‡ä»¶å®šä¹‰ã€‚</mark></span></span></p><div class="Text__Children"><div id="https://www.notion.so/0c3ebb7e1f2d4e27a42a56b8cf8db192" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">esp-idf-sys</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> é»˜è®¤å¯ç”¨äº† æ‰€æœ‰å†…ç½®</mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code"> component</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> ï¼Œå¹¶é“¾æ¥åˆ° </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">Rust</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> å¯æ‰§è¡Œç¨‹åºã€‚å¯ä»¥é€šè¿‡é…ç½® </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">esp_idf_components</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">, </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">$ESP_IDF_COMPONENTS </code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">æ¥æŒ‡å®šè¦</mark></span></span></p></div></div></div><div id="https://www.notion.so/b7245fd14f0f41dfa3258c8aeb9fc520" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">æ¥çš„ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">esp-id</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">f å†…ç½® </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">component </code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">åˆ—è¡¨ã€‚</mark></span></span></p></div><div id="https://www.notion.so/cf68371046c549139029776677ec0548" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> </mark></span></span></p></div><pre id="https://www.notion.so/bf15e4c5187846208a1a87e221ae61c2" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token punctuation">[</span>esp32-camera-binding <span class="token number">0.1</span>.0<span class="token punctuation">]</span> cargo:rustc-link-arg<span class="token operator">=</span>esp-idf/esp_common/libesp_common.a
<span class="token punctuation">[</span>esp32-camera-binding <span class="token number">0.1</span>.0<span class="token punctuation">]</span> cargo:rustc-link-arg<span class="token operator">=</span>esp-idf/esp_timer/libesp_timer.a
<span class="token punctuation">[</span>esp32-camera-binding <span class="token number">0.1</span>.0<span class="token punctuation">]</span> cargo:rustc-link-arg<span class="token operator">=</span>esp-idf/app_trace/libapp_trace.a
<span class="token punctuation">[</span>esp32-camera-binding <span class="token number">0.1</span>.0<span class="token punctuation">]</span> cargo:rustc-link-arg<span class="token operator">=</span>esp-idf/esp_event/libesp_event.a
<span class="token punctuation">[</span>esp32-camera-binding <span class="token number">0.1</span>.0<span class="token punctuation">]</span> cargo:rustc-link-arg<span class="token operator">=</span>esp-idf/nvs_flash/libnvs_flash.a 
<span class="token punctuation">[</span>esp32-camera-binding <span class="token number">0.1</span>.0<span class="token punctuation">]</span> cargo:rustc-link-arg<span class="token operator">=</span>esp-idf/esp_phy/libesp_phy.a
<span class="token punctuation">[</span>esp32-camera-binding <span class="token number">0.1</span>.0<span class="token punctuation">]</span> cargo:rustc-link-arg<span class="token operator">=</span>esp-idf/vfs/libvfs.a
// <span class="token punctuation">..</span>.
<span class="token punctuation">[</span>esp32-camera-binding <span class="token number">0.1</span>.0<span class="token punctuation">]</span> cargo:rustc-link-arg<span class="token operator">=</span>/Users/alizj/code/esp32/std/.embuild/espressif/esp-idf/v5.2.1/components/esp_wifi/lib/esp32s3/libcore.a
<span class="token punctuation">[</span>esp32-camera-binding <span class="token number">0.1</span>.0<span class="token punctuation">]</span> cargo:rustc-link-arg<span class="token operator">=</span>/Users/alizj/code/esp32/std/.embuild/espressif/esp-idf/v5.2.1/components/esp_wifi/lib/esp32s3/libespnow.a
// <span class="token punctuation">..</span>.
<span class="token punctuation">[</span>esp32-camera-binding <span class="token number">0.1</span>.0<span class="token punctuation">]</span> cargo:rustc-link-arg<span class="token operator">=</span>esp-idf/esp_coex/libesp_coex.a
<span class="token punctuation">[</span>esp32-camera-binding <span class="token number">0.1</span>.0<span class="token punctuation">]</span> cargo:rustc-link-arg<span class="token operator">=</span>esp-idf/esp_wifi/libesp_wifi.a
// <span class="token punctuation">..</span>.
<span class="token punctuation">[</span>esp32-camera-binding <span class="token number">0.1</span>.0<span class="token punctuation">]</span> cargo:rustc-link-arg<span class="token operator">=</span>esp-idf/mbedtls/mbedtls/3rdparty/p256-m/libp256m.a
<span class="token punctuation">[</span>esp32-camera-binding <span class="token number">0.1</span>.0<span class="token punctuation">]</span> cargo:rustc-link-arg<span class="token operator">=</span>/Users/alizj/code/esp32/std/.embuild/espressif/esp-idf/v5.2.1/components/esp_wifi/lib/esp32s3/libcore.a
<span class="token punctuation">[</span>esp32-camera-binding <span class="token number">0.1</span>.0<span class="token punctuation">]</span>
// <span class="token punctuation">..</span>.
<span class="token punctuation">[</span>esp32-camera-binding <span class="token number">0.1</span>.0<span class="token punctuation">]</span> cargo:rustc-link-arg<span class="token operator">=</span>-Wl,--wrap<span class="token operator">=</span>_Unwind_Backtrace
<span class="token punctuation">[</span>esp32-camera-binding <span class="token number">0.1</span>.0<span class="token punctuation">]</span> cargo:rustc-link-arg<span class="token operator">=</span>-Wl,--wrap<span class="token operator">=</span>__cxa_call_unexpected</span></span></span></code></pre><div id="https://www.notion.so/f42bebabbc6b45449907e53e03e3cfc5" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">ä¸º esp-idf-sys æ·»åŠ  å¤–éƒ¨é¢å¤–çš„ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">component</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> ï¼Œè®© esp-idf-sys bindgen å®ƒçš„å¤´æ–‡ä»¶ï¼Œå¹¶è¿›è¡Œç¼–è¯‘å’Œé“¾æ¥ã€‚</mark></span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/31695b2d09c44d8b8905106a144e5143" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">bindgen ä¸º C ç”Ÿæˆçš„ Rust æ¥å£ä¼šæ”¾åˆ° esp-idf-sys module ä¸­ä¾› Rust ç¨‹åºä½¿ç”¨ã€‚</mark></span></span></li></ul><div id="https://www.notion.so/face97a1d16d409785ec3486e2223418" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">esp-idf-sys crate æä¾›äº†ä¸€äº›å½±å“ esp-idf bindgenã€ç¼–è¯‘æ„å»ºçš„é…ç½®å‚æ•°å’Œ .cargo/config.tom ç¯å¢ƒå˜é‡ï¼š</mark></span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/9d9ecd030b034679bcf3c7d47181484b" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/esp-rs/esp-idf-sys/blob/master/BUILD-OPTIONS.md"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">https://github.com/esp-rs/esp-idf-sys/blob/master/BUILD-OPTIONS.md</mark></a></span></span></li><li id="https://www.notion.so/61d5846a39af43b2809bba63a633875b" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://docs.esp-rs.org/esp-idf-svc/esp_idf_sys/index.html"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">https://docs.esp-rs.org/esp-idf-svc/esp_idf_sys/index.html</mark></a></span></span></li></ul><div id="https://www.notion.so/165f853d33ac48ac9fff20b042bea8a7" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">æ·»åŠ  </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">extral component</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> ç¤ºä¾‹ï¼š</mark></span></span></p></div><div id="https://www.notion.so/bf2fc90864ff4a48aaee311c471e9248" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> </mark></span></span></p></div><pre id="https://www.notion.so/8a3cb4dcc52c42db9e134a9bcba68f87" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token comment"># åœ¨ workspace çš„ members åˆ—è¡¨é‡Œæ·»åŠ å¾…åˆ›å»ºçš„ crate package ç›®å½•åç§°</span>
zj@a:~/code/esp32/std$ cat Cargo<span class="token punctuation">.</span>toml
<span class="token punctuation">[</span><span class="token table class-name">workspace</span><span class="token punctuation">]</span> 
<span class="token key property">resolver</span> <span class="token punctuation">=</span> <span class="token string">"2"</span>
<span class="token key property">members</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span>
  <span class="token string">"myesp"</span><span class="token punctuation">,</span>
  <span class="token string">"myespv2"</span><span class="token punctuation">,</span>
  <span class="token string">"myespv3"</span><span class="token punctuation">,</span>
  <span class="token string">"myespv4"</span><span class="token punctuation">,</span>
  <span class="token string">"esp32-camera-binding"</span> <span class="token comment"># å¾…åˆ›å»ºçš„ create package ç›®å½•åç§°</span>
<span class="token punctuation">]</span>
<span class="token comment">#...</span>

<span class="token comment"># ç”±äº workspace çš„ Cargo.toml ä¸­æ²¡æœ‰é…ç½® [package], å³è¯¥ workspace æ²¡æœ‰é»˜è®¤çš„ root crate, å®ƒæ˜¯ä¸€</span>
<span class="token comment"># ä¸ªvirtual workspace.</span>
<span class="token comment">#</span>
<span class="token comment"># å¯¹äº virtual workspace, å¿…é¡»åœ¨ workspace çš„ .cargo/config.toml æ–‡ä»¶ä¸­, é€šè¿‡ç¯å¢ƒå˜é‡</span>
<span class="token comment"># ESP_IDF_SYS_ROOT_CRATE="esp32-camera-binding" æ¥æŒ‡å®š root crate, å¦‚ esp32-camera-binding.</span>
zj@a:~/code/esp32/std$ cat <span class="token punctuation">.</span>cargo/config<span class="token punctuation">.</span>toml
<span class="token punctuation">[</span><span class="token table class-name">env</span><span class="token punctuation">]</span>
<span class="token key property">ESP_IDF_SYS_ROOT_CRATE</span><span class="token punctuation">=</span><span class="token string">"esp32-camera-binding"</span> <span class="token comment"># å…³é”®! å¦åˆ™ç¼–è¯‘ esp32-camera-binding æ—¶ä¸ä¼šè¿›è¡Œ bindgen è½¬æ¢.</span>

<span class="token comment"># åˆ›å»ºä¸Šé¢å®šä¹‰çš„ esp32-camera-binding std é¡¹ç›®</span>
zj@a:~/code/esp32/std$ cargo generate esp-rs/esp-idf-template cargo
zj@a:~/code/esp32/std$ cd esp32-camera-binding/

<span class="token comment"># clone è¦ bindgen çš„ esp-idf component é¡¹ç›®åˆ°æœ¬åœ°</span>
zj@a:~/code/esp32/std/esp32-camera-binding$ git clone git@github<span class="token punctuation">.</span>com:espressif/esp32-camera<span class="token punctuation">.</span>git
zj@a:~/code/esp32/std/esp32-camera-binding$ ls
Cargo<span class="token punctuation">.</span>toml  bindings<span class="token punctuation">.</span>h  build<span class="token punctuation">.</span>rs  esp32-camera/  src/

<span class="token comment"># åˆ›å»ºä¸€ä¸ª bindings.h æ–‡ä»¶ï¼Œå†…å®¹ä¸º bindgen è¦è½¬æ¢çš„ component å¤´æ–‡ä»¶åˆ—è¡¨ï¼Œ</span>
<span class="token comment"># å¯ä»¥æŸ¥çœ‹é¡¹ç›®ç›®å½•ä¸­å¤´æ–‡ä»¶åç§°ã€‚</span>
zj@a:~/code/esp32/std/esp32-camera-binding$ cat bindings<span class="token punctuation">.</span>h
<span class="token comment">#include "esp_camera.h"</span>

<span class="token comment"># é…ç½®åˆšåˆ›å»ºçš„ package çš„ Cargo.toml æ–‡ä»¶ï¼Œæ·»åŠ  [[package.metadata.esp-idf-sys.extra_components]]</span>
<span class="token comment"># è¿™æ ·åœ¨ç¼–è¯‘ esp-idf-sys æ—¶ï¼Œä¼šè‡ªåŠ¨ä½¿ç”¨ bindgen å°† bindings.h ä¸­çš„å¤´æ–‡ä»¶ç”Ÿæˆåˆ° esp-idf-sys çš„ module ä¸­ï¼Œ</span>
<span class="token comment"># åŒæ—¶ä¹Ÿä¼šç¼–è¯‘è¯¥ component ä¸ºé™æ€åº“ï¼Œåç»­å¯ä»¥é“¾æ¥åˆ° Rust å¯æ‰§è¡Œç¨‹åºä¸­ã€‚</span>
zj@a:~/code/esp32/std/esp32-camera-binding$ cat Cargo<span class="token punctuation">.</span>toml
<span class="token punctuation">[</span><span class="token table class-name">package</span><span class="token punctuation">]</span>
<span class="token key property">name</span> <span class="token punctuation">=</span> <span class="token string">"esp32-camera-binding"</span>
<span class="token key property">version</span> <span class="token punctuation">=</span> <span class="token string">"0.1.0"</span>
<span class="token key property">authors</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"alizj"</span><span class="token punctuation">]</span>
<span class="token key property">edition</span> <span class="token punctuation">=</span> <span class="token string">"2021"</span>
<span class="token key property">resolver</span> <span class="token punctuation">=</span> <span class="token string">"2"</span>
<span class="token key property">rust-version</span> <span class="token punctuation">=</span> <span class="token string">"1.71"</span>

<span class="token punctuation">[</span><span class="token table class-name">profile.release</span><span class="token punctuation">]</span>
<span class="token key property">opt-level</span> <span class="token punctuation">=</span> <span class="token string">"s"</span>

<span class="token punctuation">[</span><span class="token table class-name">profile.dev</span><span class="token punctuation">]</span>
<span class="token key property">debug</span> <span class="token punctuation">=</span> <span class="token boolean">true</span>
<span class="token key property">opt-level</span> <span class="token punctuation">=</span> <span class="token string">"z"</span>

<span class="token punctuation">[</span><span class="token table class-name">features</span><span class="token punctuation">]</span>
<span class="token key property">default</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"std"</span><span class="token punctuation">,</span> <span class="token string">"embassy"</span><span class="token punctuation">,</span> <span class="token string">"esp-idf-svc/native"</span><span class="token punctuation">,</span> <span class="token string">"esp-idf-sys/native"</span><span class="token punctuation">]</span>

<span class="token key property">pio</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"esp-idf-svc/pio"</span><span class="token punctuation">]</span>
<span class="token key property">std</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"alloc"</span><span class="token punctuation">,</span> <span class="token string">"esp-idf-svc/binstart"</span><span class="token punctuation">,</span> <span class="token string">"esp-idf-svc/std"</span><span class="token punctuation">]</span>
<span class="token key property">alloc</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"esp-idf-svc/alloc"</span><span class="token punctuation">]</span>
<span class="token key property">nightly</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"esp-idf-svc/nightly"</span><span class="token punctuation">]</span>
<span class="token key property">experimental</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"esp-idf-svc/experimental"</span><span class="token punctuation">]</span>
<span class="token key property">embassy</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"esp-idf-svc/embassy-sync"</span><span class="token punctuation">,</span> <span class="token string">"esp-idf-svc/critical-section"</span><span class="token punctuation">,</span> <span class="token string">"esp-idf-svc/embassy-time-driver"</span><span class="token punctuation">]</span>

<span class="token punctuation">[</span><span class="token table class-name">dependencies</span><span class="token punctuation">]</span>
<span class="token key property">log</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span> <span class="token key property">version</span> <span class="token punctuation">=</span> <span class="token string">"0.4"</span><span class="token punctuation">,</span> <span class="token key property">default-features</span> <span class="token punctuation">=</span> <span class="token boolean">false</span> <span class="token punctuation">}</span>
<span class="token key property">esp-idf-svc</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span> <span class="token key property">version</span> <span class="token punctuation">=</span> <span class="token string">"0.48"</span><span class="token punctuation">,</span> <span class="token key property">default-features</span> <span class="token punctuation">=</span> <span class="token boolean">false</span> <span class="token punctuation">}</span>
<span class="token key property">esp-idf-sys</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span> <span class="token key property">version</span> <span class="token punctuation">=</span> <span class="token string">"0.34.1"</span><span class="token punctuation">}</span> <span class="token comment"># æ·»åŠ  esp-idf-sys ä¾èµ–</span>
<span class="token key property">esp-idf-hal</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span> <span class="token key property">version</span> <span class="token punctuation">=</span> <span class="token string">"0.43.1"</span><span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token table class-name">build-dependencies</span><span class="token punctuation">]</span>
<span class="token key property">embuild</span> <span class="token punctuation">=</span> <span class="token string">"0.31.3"</span>

<span class="token comment"># esp-idf-sys çš„æ„å»ºè„šæœ¬ embuild åœ¨ç¼–è¯‘ esp-idf C æ—¶ä½¿ç”¨çš„é…ç½®å‚æ•°.</span>
<span class="token comment">#</span>
<span class="token comment"># é€šè¿‡åœ¨ crate package çš„ Cargo.toml æ–‡ä»¶, è€Œé workspace çº§åˆ«çš„ .cargo/config.toml çš„ç¯å¢ƒå˜é‡æ¥é…ç½®,</span>
<span class="token comment"># å¯ä»¥æ›´çµæ´»å’Œä¸ªæ€§åŒ–.</span>
<span class="token comment">#</span>
<span class="token comment"># ä¸‹é¢çš„ package.metadata.esp-idf-sys åªèƒ½åœ¨ root crate ä¸­é…ç½®æ‰èƒ½ç”Ÿæ•ˆ, è€Œ root crate çš„é…ç½®æ–¹å¼æœ‰ä¸¤ç§:</span>
<span class="token comment"># 1. åœ¨ workspace çš„ Cargo.toml ä¸­é…ç½®çš„ [package] ç§°ä¸º root crate;</span>
<span class="token comment"># 2. å¦åˆ™, éœ€è¦åœ¨ workspace çš„ .cargo/config.toml ä¸­ç”¨ç¯å¢ƒå˜é‡é…ç½® ESP_IDF_SYS_ROOT_CRATE é…ç½® root crate å¦‚ "esp32-camera-binding".</span>
<span class="token punctuation">[</span><span class="token table class-name">package.metadata.esp-idf-sys</span><span class="token punctuation">]</span>
<span class="token key property">esp_idf_tools_install_dir</span> <span class="token punctuation">=</span> <span class="token string">"workspace"</span>
<span class="token key property">esp_idf_sdkconfig</span> <span class="token punctuation">=</span> <span class="token string">"sdkconfig"</span> <span class="token comment"># ç›¸å¯¹äº workspace ç›®å½•</span>
<span class="token key property">esp_idf_sdkconfig_defaults</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"sdkconfig.defaults"</span><span class="token punctuation">,</span> <span class="token string">"sdkconfig.defaults.esp32s3"</span><span class="token punctuation">]</span> <span class="token comment"># ç›¸å¯¹äº workspace ç›®å½•</span>
<span class="token comment">#esp_idf_components = ["pthread"]</span>
<span class="token comment"># native builder only</span>
<span class="token key property">esp_idf_version</span> <span class="token punctuation">=</span> <span class="token string">"v5.2.1"</span>

<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token table class-name">package.metadata.esp-idf-sys.extra_components</span><span class="token punctuation">]</span><span class="token punctuation">]</span>  <span class="token comment"># ä¸º esp-idf-sys æ·»åŠ é¢å¤–çš„ C component</span>
<span class="token key property">component_dirs</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span> <span class="token string">"esp32-camera"</span> <span class="token punctuation">]</span>  <span class="token comment"># æœ¬åœ° component ç›®å½•åˆ—è¡¨</span>
<span class="token key property">bindings_header</span> <span class="token punctuation">=</span> <span class="token string">"bindings.h"</span>  <span class="token comment"># bindgen å¤´æ–‡ä»¶ï¼Œå†…å®¹ä¸º component çš„å¤´æ–‡ä»¶</span>
<span class="token key property">bindings_module</span> <span class="token punctuation">=</span> <span class="token string">"camera"</span>  <span class="token comment"># bindgen è½¬æ¢åçš„ Rust ä»£ç æ‰€å±çš„ esp-idf-sys module</span>
zj@a:~/code/esp32/std/esp32-camera-binding$</span></span></span></code></pre><div id="https://www.notion.so/e848c2b912ae41f4a6d87aa529407da6" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">ä¸Šé¢æ˜¯æ‰‹åŠ¨å°† component ä¸‹è½½åˆ°æœ¬åœ°ï¼Œè¿˜å¯ä»¥æ·»åŠ  ESP-IDF component registry ä¸­çš„ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">remote component</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> ï¼Œè¿™æ—¶ esp-idf ä¼šè‡ªåŠ¨ä¸‹è½½åˆ°æœ¬åœ°ã€‚</mark></span></span></p></div><div id="https://www.notion.so/fa05cc3179d64a119ab54b130a13e0ba" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> </mark></span></span></p></div><pre id="https://www.notion.so/90862e77357642668c590a2c89288bd2" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token punctuation">[</span><span class="token table class-name">package.metadata.esp-idf-sys.extra_components.0.remote_component</span><span class="token punctuation">]</span>
<span class="token comment"># The name of the remote component. Corresponds to a key in the dependencies of</span>
<span class="token comment"># `idf_component.yml`.</span>
<span class="token key property">name</span> <span class="token punctuation">=</span> <span class="token string">"component_name"</span>
<span class="token comment"># The version of the remote component. Corresponds to the `version` field of the</span>
<span class="token comment"># `idf_component.yml`. </span>
<span class="token key property">version</span> <span class="token punctuation">=</span> <span class="token string">"1.2"</span>
<span class="token comment"># A git url that contains this remote component. Corresponds to the `git`</span>
<span class="token comment"># field of the `idf_component.yml`.</span>
<span class="token comment">#</span>
<span class="token comment"># This field is optional.</span>
<span class="token key property">git</span> <span class="token punctuation">=</span> <span class="token string">"https://github.com/espressif/esp32-camera.git"</span>

<span class="token comment"># A path to the component.</span>
<span class="token comment"># Corresponds to the `path` field of the `idf_component.yml`.</span>
<span class="token comment">#</span>
<span class="token comment"># Note: This should not be used for local components, use</span>
<span class="token comment"># `component_dirs` of extra components instead.</span>
<span class="token comment">#</span>
<span class="token comment"># This field is optional.</span>
<span class="token key property">path</span> <span class="token punctuation">=</span> <span class="token string">"path/to/component"</span>

<span class="token comment"># A url to a custom component registry. Corresponds to the `service_url`</span>
<span class="token comment"># field of the `idf_component.yml`.</span>
<span class="token comment">#</span>
<span class="token comment"># This field is optional.</span>
<span class="token key property">service_url</span> <span class="token punctuation">=</span> <span class="token string">"https://componentregistry.company.com"</span></span></span></span></code></pre><div id="https://www.notion.so/00f06e334c844e8ab6052a9fe6d49f4d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">remote component ç¤ºä¾‹:</mark></span></span></p></div><div id="https://www.notion.so/822e8df960164d59a089531814229a41" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> </mark></span></span></p></div><pre id="https://www.notion.so/e91be435a46e410c9020155d8c2cfe37" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>zj@a:~/code/esp32/std/esp32-camera-binding$ cat Cargo<span class="token punctuation">.</span>toml
<span class="token punctuation">[</span><span class="token table class-name">package</span><span class="token punctuation">]</span> 
<span class="token key property">name</span> <span class="token punctuation">=</span> <span class="token string">"esp32-camera-binding"</span>
<span class="token key property">version</span> <span class="token punctuation">=</span> <span class="token string">"0.1.0"</span>
<span class="token key property">authors</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"alizj"</span><span class="token punctuation">]</span>
<span class="token key property">edition</span> <span class="token punctuation">=</span> <span class="token string">"2021"</span>
<span class="token key property">resolver</span> <span class="token punctuation">=</span> <span class="token string">"2"</span>
<span class="token key property">rust-version</span> <span class="token punctuation">=</span> <span class="token string">"1.71"</span>

<span class="token punctuation">[</span><span class="token table class-name">profile.release</span><span class="token punctuation">]</span>
<span class="token key property">opt-level</span> <span class="token punctuation">=</span> <span class="token string">"s"</span>

<span class="token punctuation">[</span><span class="token table class-name">profile.dev</span><span class="token punctuation">]</span>
<span class="token key property">debug</span> <span class="token punctuation">=</span> <span class="token boolean">true</span>    <span class="token comment"># Symbols are nice and they don't increase the size on Flash</span>
<span class="token key property">opt-level</span> <span class="token punctuation">=</span> <span class="token string">"z"</span>

<span class="token punctuation">[</span><span class="token table class-name">features</span><span class="token punctuation">]</span>
<span class="token key property">default</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"std"</span><span class="token punctuation">,</span> <span class="token string">"embassy"</span><span class="token punctuation">,</span> <span class="token string">"esp-idf-svc/native"</span><span class="token punctuation">,</span> <span class="token string">"esp-idf-sys/native"</span><span class="token punctuation">]</span>
<span class="token key property">pio</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"esp-idf-svc/pio"</span><span class="token punctuation">]</span>
<span class="token key property">std</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"alloc"</span><span class="token punctuation">,</span> <span class="token string">"esp-idf-svc/binstart"</span><span class="token punctuation">,</span> <span class="token string">"esp-idf-svc/std"</span><span class="token punctuation">]</span>
<span class="token key property">alloc</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"esp-idf-svc/alloc"</span><span class="token punctuation">]</span>
<span class="token key property">nightly</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"esp-idf-svc/nightly"</span><span class="token punctuation">]</span>
<span class="token key property">experimental</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"esp-idf-svc/experimental"</span><span class="token punctuation">]</span>
<span class="token key property">embassy</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"esp-idf-svc/embassy-sync"</span><span class="token punctuation">,</span> <span class="token string">"esp-idf-svc/critical-section"</span><span class="token punctuation">,</span> <span class="token string">"esp-idf-svc/embassy-time-driver"</span><span class="token punctuation">]</span>

<span class="token punctuation">[</span><span class="token table class-name">dependencies</span><span class="token punctuation">]</span>
<span class="token key property">log</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span> <span class="token key property">version</span> <span class="token punctuation">=</span> <span class="token string">"0.4"</span><span class="token punctuation">,</span> <span class="token key property">default-features</span> <span class="token punctuation">=</span> <span class="token boolean">false</span> <span class="token punctuation">}</span>
<span class="token key property">esp-idf-svc</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span> <span class="token key property">version</span> <span class="token punctuation">=</span> <span class="token string">"0.48"</span> <span class="token punctuation">}</span>
<span class="token key property">esp-idf-sys</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span> <span class="token key property">version</span> <span class="token punctuation">=</span> <span class="token string">"0.34.1"</span><span class="token punctuation">}</span>
<span class="token key property">esp-idf-hal</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span> <span class="token key property">version</span> <span class="token punctuation">=</span> <span class="token string">"0.43.1"</span><span class="token punctuation">}</span>
<span class="token key property">embedded-svc</span> <span class="token punctuation">=</span> <span class="token string">"0.21"</span>
<span class="token key property">anyhow</span> <span class="token punctuation">=</span> <span class="token string">"1"</span>
<span class="token key property">base64</span> <span class="token punctuation">=</span> <span class="token string">"0.13.0"</span>

<span class="token punctuation">[</span><span class="token table class-name">build-dependencies</span><span class="token punctuation">]</span>
<span class="token key property">embuild</span> <span class="token punctuation">=</span> <span class="token string">"0.31.3"</span>

<span class="token comment"># esp-idf-sys çš„æ„å»ºè„šæœ¬ embuild åœ¨ç¼–è¯‘ esp-idf C æ—¶ä½¿ç”¨çš„é…ç½®å‚æ•°.</span>
<span class="token comment">#</span>
<span class="token comment"># é€šè¿‡åœ¨ crate package çš„ Cargo.toml æ–‡ä»¶, è€Œé workspace çº§åˆ«çš„ .cargo/config.toml çš„ç¯å¢ƒå˜é‡æ¥é…</span>
<span class="token comment"># ç½®,å¯ä»¥æ›´çµæ´»å’Œä¸ªæ€§åŒ–.</span>
<span class="token comment">#</span>
<span class="token comment"># ä¸‹é¢çš„ package.metadata.esp-idf-sys åªèƒ½åœ¨ root crate ä¸­é…ç½®æ‰èƒ½ç”Ÿæ•ˆ, è€Œ root crate çš„é…ç½®æ–¹å¼æœ‰ä¸¤ç§:</span>
<span class="token comment"># 1. åœ¨ workspace çš„ Cargo.toml ä¸­é…ç½®çš„ [package] ç§°ä¸º root crate;</span>
<span class="token comment"># 2. å¦åˆ™, éœ€è¦åœ¨ workspace çš„ .cargo/config.toml ä¸­ç”¨ç¯å¢ƒå˜é‡é…ç½® ESP_IDF_SYS_ROOT_CRATE é…ç½® root crate å¦‚ "esp32-camera-binding".</span>
<span class="token punctuation">[</span><span class="token table class-name">package.metadata.esp-idf-sys</span><span class="token punctuation">]</span>
<span class="token key property">esp_idf_tools_install_dir</span> <span class="token punctuation">=</span> <span class="token string">"workspace"</span>
<span class="token key property">esp_idf_sdkconfig</span> <span class="token punctuation">=</span> <span class="token string">"sdkconfig"</span> <span class="token comment"># ç›¸å¯¹äº workspace ç›®å½•</span>
<span class="token key property">esp_idf_sdkconfig_defaults</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"sdkconfig.defaults"</span><span class="token punctuation">,</span> <span class="token string">"sdkconfig.defaults.esp32s3"</span><span class="token punctuation">]</span> <span class="token comment"># ç›¸å¯¹äº workspace ç›®å½•</span>
<span class="token comment">#esp_idf_components = ["pthread"]</span>
<span class="token comment"># native builder only</span>
<span class="token key property">esp_idf_version</span> <span class="token punctuation">=</span> <span class="token string">"v5.2.1"</span>

<span class="token comment"># å¯¹äº virtual workspace ç±»å‹, å¿…é¡»åœ¨ .cargo/config.toml ä¸­é…ç½® ESP_IDF_SYS_ROOT_CRATE æ¥æŒ‡å®š root crate package.</span>
<span class="token comment">#esp_idf_sys_root_crate="esp32-camera-binding"</span>

<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token table class-name">package.metadata.esp-idf-sys.extra_components</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token key property">component_dirs</span> <span class="token punctuation">=</span> <span class="token string">"esp32-camera"</span>  <span class="token comment"># æœ¬åœ° component</span>
<span class="token key property">bindings_header</span> <span class="token punctuation">=</span> <span class="token string">"bindings.h"</span>
<span class="token key property">bindings_module</span> <span class="token punctuation">=</span> <span class="token string">"camera"</span>

<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token table class-name">package.metadata.esp-idf-sys.extra_components</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token key property">remote_component</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span> <span class="token key property">name</span> <span class="token punctuation">=</span> <span class="token string">"espressif/button"</span><span class="token punctuation">,</span> <span class="token key property">version</span> <span class="token punctuation">=</span> <span class="token string">"3.2.0"</span><span class="token punctuation">}</span> <span class="token comment"># è¿œç¨‹ ESP-IDF component registry</span>
<span class="token key property">bindings_header</span> <span class="token punctuation">=</span> <span class="token string">"bindings.h"</span>
<span class="token key property">bindings_module</span> <span class="token punctuation">=</span> <span class="token string">"button"</span>
zj@a:~/code/esp32/std/esp32-camera-binding$

zj@a:~/code/esp32/std/esp32-camera-binding$ cat bindings<span class="token punctuation">.</span>h  <span class="token comment"># ä¸¤ä¸ª component çš„å¤´æ–‡ä»¶</span>
<span class="token comment">#include "esp_camera.h"</span>
<span class="token comment">#include "iot_button.h"</span></span></span></span></code></pre><div id="https://www.notion.so/aa21d4bc974c4169a48d3262c122c05a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">cargo build ä¼šè‡ªåŠ¨å°† component ä¸‹è½½åˆ°æœ¬åœ°ï¼Œç„¶åè¿›è¡Œ bindgen å’Œé“¾æ¥ï¼š</mark></span></span></p></div><div id="https://www.notion.so/9dd7820a83af49639266c96dd072505d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> </mark></span></span></p></div><pre id="https://www.notion.so/e6a5959d78a84e759f5991b6509a274b" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>zj@a:~/code/esp32/std/esp32-camera-binding$ <span class="token function">ls</span> <span class="token parameter variable">-l</span> <span class="token punctuation">..</span>/target/xtensa-esp32s3-espidf/debug/build/esp-idf-sys-7b038a52fa416f70/out
total <span class="token number">5</span>.3M
-rw-r--r--  <span class="token number">1</span> alizj <span class="token number">1</span>.4K  <span class="token number">7</span> <span class="token number">24</span>  <span class="token number">2006</span> CMakeLists.txt
-rw-r--r--  <span class="token number">1</span> alizj <span class="token number">5</span>.2M  <span class="token number">5</span> <span class="token number">24</span> <span class="token number">12</span>:36 bindings.rs  <span class="token comment"># eps-idf-sys æ‰€æœ‰ component Rust æ¥å£ç»‘å®š</span>
drwxr-xr-x <span class="token number">36</span> alizj <span class="token number">1</span>.2K  <span class="token number">5</span> <span class="token number">24</span> <span class="token number">12</span>:36 build/
-rw-r--r--  <span class="token number">1</span> alizj <span class="token number">2</span>.6K  <span class="token number">5</span> <span class="token number">24</span> <span class="token number">12</span>:36 esp-idf-build.json
-rw-r--r--  <span class="token number">1</span> alizj  <span class="token number">147</span>  <span class="token number">5</span> <span class="token number">24</span> <span class="token number">12</span>:36 gen-sdkconfig.defaults
drwxr-xr-x  <span class="token number">5</span> alizj  <span class="token number">160</span>  <span class="token number">5</span> <span class="token number">24</span> <span class="token number">12</span>:35 main/
drwxr-xr-x  <span class="token number">4</span> alizj  <span class="token number">128</span>  <span class="token number">5</span> <span class="token number">24</span> <span class="token number">12</span>:35 managed_components/ <span class="token comment"># è‡ªåŠ¨ä¸‹è½½åˆ°æœ¬åœ°çš„ remote component ç›®å½•</span>
-rw-r--r--  <span class="token number">1</span> alizj  62K  <span class="token number">5</span> <span class="token number">24</span> <span class="token number">12</span>:36 sdkconfig

zj@a:~/code/esp32/std/esp32-camera-binding$ <span class="token function">ls</span> <span class="token parameter variable">-l</span> <span class="token punctuation">..</span>/target/xtensa-esp32s3-espidf/debug/build/esp-idf-sys-7b038a52fa416f70/out/managed_components/
total <span class="token number">0</span>
drwxr-xr-x <span class="token number">16</span> alizj <span class="token number">512</span>  <span class="token number">5</span> <span class="token number">24</span> <span class="token number">12</span>:35 espressif__button/  <span class="token comment"># button</span>
drwxr-xr-x <span class="token number">19</span> alizj <span class="token number">608</span>  <span class="token number">5</span> <span class="token number">24</span> <span class="token number">12</span>:35 espressif__cmake_utilities/
zj@a:~/code/esp32/std/esp32-camera-binding$ <span class="token function">ls</span> <span class="token parameter variable">-l</span> <span class="token punctuation">..</span>/target/xtensa-esp32s3-espidf/debug/build/esp-idf-sys-7b038a52fa416f70/out/managed_components/espressif__button/
total 84K
-rw-r--r-- <span class="token number">1</span> alizj <span class="token number">2</span>.4K  <span class="token number">1</span>  <span class="token number">9</span> <span class="token number">16</span>:34 CHANGELOG.md
-rw-r--r-- <span class="token number">1</span> alizj  <span class="token number">487</span>  <span class="token number">1</span>  <span class="token number">9</span> <span class="token number">16</span>:34 CMakeLists.txt
-rw-r--r-- <span class="token number">1</span> alizj <span class="token number">1</span>.8K  <span class="token number">1</span>  <span class="token number">9</span> <span class="token number">16</span>:34 Kconfig
-rw-r--r-- <span class="token number">1</span> alizj <span class="token number">1</span>.7K  <span class="token number">1</span>  <span class="token number">9</span> <span class="token number">16</span>:34 README.md
-rw-r--r-- <span class="token number">1</span> alizj  12K  <span class="token number">1</span>  <span class="token number">9</span> <span class="token number">16</span>:34 button_adc.c
-rw-r--r-- <span class="token number">1</span> alizj <span class="token number">2</span>.6K  <span class="token number">1</span>  <span class="token number">9</span> <span class="token number">16</span>:34 button_gpio.c
-rw-r--r-- <span class="token number">1</span> alizj <span class="token number">2</span>.0K  <span class="token number">1</span>  <span class="token number">9</span> <span class="token number">16</span>:34 button_matrix.c 
drwxr-xr-x <span class="token number">3</span> alizj   <span class="token number">96</span>  <span class="token number">1</span>  <span class="token number">9</span> <span class="token number">16</span>:34 examples/
-rw-r--r-- <span class="token number">1</span> alizj  <span class="token number">440</span>  <span class="token number">1</span>  <span class="token number">9</span> <span class="token number">16</span>:34 idf_component.yml
drwxr-xr-x <span class="token number">6</span> alizj  <span class="token number">192</span>  <span class="token number">1</span>  <span class="token number">9</span> <span class="token number">16</span>:34 include/
-rw-r--r-- <span class="token number">1</span> alizj  30K  <span class="token number">1</span>  <span class="token number">9</span> <span class="token number">16</span>:34 iot_button.c
-rw-r--r-- <span class="token number">1</span> alizj  12K  <span class="token number">1</span>  <span class="token number">9</span> <span class="token number">16</span>:34 license.txt
drwxr-xr-x <span class="token number">8</span> alizj  <span class="token number">256</span>  <span class="token number">1</span>  <span class="token number">9</span> <span class="token number">16</span>:34 test_apps/

zj@a:~/code/esp32/std/esp32-camera-binding$ <span class="token function">grep</span> <span class="token parameter variable">-A</span> <span class="token number">3</span> <span class="token string">'pub mod camera'</span> <span class="token punctuation">..</span>/target/xtensa-esp32s3-espidf/debug/build/esp-idf-sys-7b038a52fa416f70/out/bindings.rs
pub mod camera <span class="token punctuation">{</span>
    /* automatically generated by rust-bindgen <span class="token number">0.63</span>.0 */

    <span class="token comment">#[repr(C)]</span>

zj@a:~/code/esp32/std/esp32-camera-binding$ <span class="token function">grep</span> <span class="token parameter variable">-A</span> <span class="token number">3</span> <span class="token string">'pub mod button'</span> <span class="token punctuation">..</span>/target/xtensa-esp32s3-espidf/debug/build/esp-idf-sys-7b038a52fa416f70/out/bindings.rs
pub mod button <span class="token punctuation">{</span>
    /* automatically generated by rust-bindgen <span class="token number">0.63</span>.0 */

    <span class="token comment">#[repr(C)]</span></span></span></span></code></pre><h2 id="https://www.notion.so/e19eea356cf04bb9b882d5018fbb16eb" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/e19eea356cf04bb9b882d5018fbb16eb"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">2 é…ç½® </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">esp-rs</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> é¡¹ç›®çš„ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">esp-idf-sys</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> å‚æ•° </mark></span></span></h2><div id="https://www.notion.so/7bb9e858aef841ada98f07a1a11c50ca" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">å„</mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code"> esp-idf-sys</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> é…ç½®å‚æ•°æœ‰ç¯å¢ƒå˜é‡å’Œ metadata ä¸¤ç§æ–¹å¼ï¼ˆç¯å¢ƒå˜é‡çš„ä¼˜å…ˆçº§æ›´é«˜ï¼‰ï¼š</mark></span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/a38908b3b7804729a91e03bc0f6120fd" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">åœ¨ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">.cargo/config.toml</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> ä¸­é…ç½® </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">env </code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">ç¯å¢ƒå˜é‡ã€</mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">rusts flags</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">ï¼›</mark></span></span></li><li id="https://www.notion.so/6437f709cc184277b7ac180b5cff49b2" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">åœ¨ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">Cargo.toml </code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">ä¸­ä¸º </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">[package.metadata.esp-idf-sys] section </code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">æ·»åŠ é…ç½®å‚æ•°ï¼›</mark></span></span></li></ol><div id="https://www.notion.so/8bbe686a9c084948aa37dbe31256c68d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">å¦‚æœé¡¹ç›® </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">crate package </code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">ä½äº </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">workspace </code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">ä¸­ï¼Œåˆ™ï¼š</mark></span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/67d7e7054ff94b73bdb34ede9cee3c8b" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">ä¸Šé¢ .</mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">cargo/config.toml </code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">ä¸º </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">workspace</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> æ ¹ç›®å½•ä¸‹çš„ç›®å½•å’Œé…ç½®ï¼›</mark></span></span></li><li id="https://www.notion.so/f227fa7d1493486393b40d467149ec5d" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">[package.metadata.esp-idf-sys]</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> ä½äºé¡¹ç›® </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">crate package</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> çš„</mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code"> Cargo.toml </code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">æ–‡ä»¶ä¸­ï¼›</mark></span></span></li><li id="https://www.notion.so/bb98f08054844bd195013da999f939f2" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">å¦‚æœ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">workspace</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> æ²¡æœ‰ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">root package</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">ï¼Œåˆ™ç§°ä¸º </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">virtual workspace</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">ï¼Œè¿™æ—¶éœ€è¦åœ¨ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">workspace</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> çš„ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">.cargo/config.toml</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> ä¸­é€šè¿‡ç¯å¢ƒå˜é‡ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">ESP_IDF_SYS_ROOT_CRATE </code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">æ¥æŒ‡å®šé¡¹ç›® </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">crate package</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> åç§°ï¼Œå¦åˆ™ç¼–è¯‘ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">esp-idf-sys</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> æ—¶ä¸ä¼šç¼–è¯‘å’Œ</mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code"> bindgen</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> é¢å¤–çš„ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">component</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">ã€‚</mark></span></span></li></ol><div id="https://www.notion.so/b76bb4650ac84f169f162c1196790773" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">é€šè¿‡é¡¹ç›® </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">crate package</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> çš„ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">Cargo.toml [package.metadata.esp-idf-sys]</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> é…ç½®ï¼š</mark></span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/d6f65d87273142e790d5187fbaa89da9" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">å¿…é¡»åœ¨å…ˆåœ¨ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">workspace </code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">çš„ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">.cargo/config.toml</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> ä¸­é…ç½®ç¯å¢ƒå˜é‡ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">ESP_IDF_SYS_ROOT_CRATE </code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">æŒ‡å‘æœ¬ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">crates</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">ï¼Œä¸‹é¢çš„é…ç½®æ‰ç”Ÿæ•ˆã€‚</mark></span></span></li></ul><div id="https://www.notion.so/7f06987dda594b68b5e8a1fb63da31a2" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> </mark></span></span></p></div><pre id="https://www.notion.so/6e112a8b73e541ec92608241afc72026" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token punctuation">[</span><span class="token table class-name">package.metadata.esp-idf-sys</span><span class="token punctuation">]</span> 
<span class="token key property">esp_idf_tools_install_dir</span> <span class="token punctuation">=</span> <span class="token string">"global"</span>
<span class="token key property">esp_idf_sdkconfig</span> <span class="token punctuation">=</span> <span class="token string">"sdkconfig"</span>
<span class="token key property">esp_idf_sdkconfig_defaults</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"sdkconfig.defaults"</span><span class="token punctuation">,</span> <span class="token string">"sdkconfig.defaults.ble"</span><span class="token punctuation">]</span>
<span class="token comment"># native builder only</span>
<span class="token key property">esp_idf_version</span> <span class="token punctuation">=</span> <span class="token string">"branch:release/v4.4"</span>
<span class="token key property">esp_idf_components</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"pthread"</span><span class="token punctuation">]</span></span></span></span></code></pre><div id="https://www.notion.so/f431b35f0d6a4932b1d0eea476a83a8c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">é€šè¿‡ cargo/config.toml ä¸­çš„ env é…ç½®: </mark></span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/esp-rs/esp-idf-sys/blob/master/BUILD-OPTIONS.md"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">ç¯å¢ƒå˜é‡åˆ—è¡¨</mark></a></span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/99827039d1b941b1bd7b08083c80048d" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">esp_idf_sdkconfig_defaults, $ESP_IDF_SDKCONFIG_DEFAULTS: é»˜è®¤ä¸º sdkconfig.defaults;</mark></span></span></li><li id="https://www.notion.so/6325bf191d114a1493a6e343f7cd2597" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">esp_idf_sdkconfig, $ESP_IDF_SDKCONFIG: é»˜è®¤ä¸º sdkconfig</mark></span></span></li><li id="https://www.notion.so/082ef9e4dfed40fca94b2de56b6b66b9" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">esp_idf_tools_install_dir, $ESP_IDF_TOOLS_INSTALL_DIR, å¯é€‰å€¼ä¸ºï¼š</mark></span></span><ul class="BulletedListWrapper"><li id="https://www.notion.so/a90157c2aef740b4888b4e97baa338b7" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">workspaceï¼ˆç¼ºçœï¼‰ï¼Œé»˜è®¤ä¸º </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">/.embuild/espressifï¼›</mark></span></span></li><li id="https://www.notion.so/05713fb18a4e4f8ab4a436e31b92f250" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">out - the tooling will be installed or used inside esp-idf-sysâ€™s build output directory, and will be deleted when </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">cargo clean</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> is invoked;</mark></span></span></li><li id="https://www.notion.so/ba19d647ba8e4588901273684924cadd" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">global(å»ºè®®)</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> - the tooling will be installed or used in its standard directory (~/.platformio for PlatformIO, and </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">~/.espressif</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> for the native ESP-IDF toolset);</mark></span></span></li><li id="https://www.notion.so/cfd2143ba7bf451b805058d90486b239" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">custom:</mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> - the tooling will be installed or used in the directory specified by </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">. If this directory is a relative location, it is assumed to be relative to the workspace directory;</mark></span></span></li></ul></li><li id="https://www.notion.so/342ad6e5736d4a3398118cc14a8e9da7" class="NumberedList" value="4"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">idf_path, $IDF_PATH (native builder only): A path to a user-provided local clone of the esp-idf, that will be used instead of the one downloaded by the build script.</mark></span></span></li><li id="https://www.notion.so/38ae61dce31d41e8849d3121d3254900" class="NumberedList" value="5"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">esp_idf_version, $ESP_IDF_VERSION (native builder only) : The version used for the esp-idf, can be one of the following</mark></span></span></li><li id="https://www.notion.so/7c083eb743f44bd69adbbf5bd371365e" class="NumberedList" value="6"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">mcu, $MCU: The MCU name (i.e. esp32, esp32s2, esp32s3 esp32c3, esp32c2, esp32h2, esp32c5, esp32c6, esp32p4).</mark></span></span></li><li id="https://www.notion.so/d459e6d5b34041a6bfd43b0797157044" class="NumberedList" value="7"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">esp_idf_components, $ESP_IDF_COMPONENTS (native builder only) : Defaults to </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">all components</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> being built.</mark></span></span><ul class="BulletedListWrapper"><li id="https://www.notion.so/2298db7865b941e3838298e72d9db003" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">esp-idf çš„ component åˆ—è¡¨å‚è€ƒ </mark></span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/espressif/esp-idf/tree/master/components"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">esp-idf components ç›®å½•</mark></a></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> ï¼›</mark></span></span></li></ul></li></ol><div id="https://www.notion.so/552bdbf1511f41b18e315ca9835b6409" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">ä¸ºäº†åŠ å¿« cargo build é€Ÿç‡ï¼Œé¿å…æ¯æ¬¡éƒ½é‡æ–°ç¼–è¯‘æ„å»º esp-idfï¼Œå»ºè®®ä½¿ç”¨çš„ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">.cargo/config.toml</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> ç¤ºä¾‹é…ç½®(åœ¨é¡¹ç›®æ‰§è¡Œ cargo build å‘½ä»¤æ¥è¿›è¡ŒéªŒè¯):</mark></span></span></p></div><div id="https://www.notion.so/ce70ae3687324c88b2655833e0df4f69" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> </mark></span></span></p></div><pre id="https://www.notion.so/603b9edb7d644fd2b0d02558bd83a618" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token punctuation">[</span><span class="token table class-name">build</span><span class="token punctuation">]</span>
<span class="token key property">target</span> <span class="token punctuation">=</span> <span class="token string">"xtensa-esp32s3-espidf"</span> 
<span class="token comment"># ä½¿ç”¨ sccache æ¥è°ƒç”¨ rustc ç¼–è¯‘å™¨, æœ‰åˆ©ç”¨ç¼“å­˜åŠ å¿«æ„å»ºé€Ÿåº¦.</span>
<span class="token comment"># å…ˆå®‰è£… sccache: cargo install sccache --locked</span>
<span class="token key property">rustc-wrapper</span> <span class="token punctuation">=</span> <span class="token string">"/opt/homebrew/bin/sccache"</span>

<span class="token punctuation">[</span><span class="token table class-name">target.xtensa-esp32s3-espidf</span><span class="token punctuation">]</span>
<span class="token key property">linker</span> <span class="token punctuation">=</span> <span class="token string">"ldproxy"</span>
<span class="token comment"># runner = "espflash --monitor" # Select this runner for espflash v1.x.x</span>
<span class="token key property">runner</span> <span class="token punctuation">=</span> <span class="token string">"espflash flash --monitor"</span> <span class="token comment"># Select this runner for espflash v2.x.x</span>

<span class="token comment"># ä»¥ä¸‹æ˜¯ä½¿ç”¨ rustc æ„å»º esp-rs/esp-idf-sys æ—¶ä¼ é€’çš„å‚æ•°</span>
<span class="token comment"># https://github.com/esp-rs/esp-idf-sys/blob/master/BUILD-OPTIONS.md This is a flag for the libc</span>
<span class="token comment"># crate that uses 64-bits (instead of 32-bits) for time_t. This must be set for ESP-IDF 5.0 and</span>
<span class="token comment"># above and must be unset for lesser versions.</span>
<span class="token key property">rustflags</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span> <span class="token string">"--cfg"</span><span class="token punctuation">,</span>  <span class="token string">"espidf_time64"</span><span class="token punctuation">]</span> <span class="token comment"># Extending time_t for ESP IDF 5: https://github.com/esp-rs/rust/issues/110</span>
<span class="token comment"># https://github.com/esp-rs/esp-idf-sys/blob/master/BUILD-OPTIONS.md</span>
<span class="token comment"># ç­‰æ•ˆäºï¼š -Zbuild-std=std,panic_abort</span>
<span class="token comment"># Required for std support. Rust does not provide std libraries for ESP32 targets since they are tier-2/-3.</span>
<span class="token punctuation">[</span><span class="token table class-name">unstable</span><span class="token punctuation">]</span>
<span class="token key property">build-std</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"std"</span><span class="token punctuation">,</span> <span class="token string">"panic_abort"</span><span class="token punctuation">]</span>

<span class="token comment"># cargo è°ƒç”¨å‘½ä»¤æ—¶ä½¿ç”¨çš„ç¯å¢ƒå˜é‡</span>
<span class="token comment"># å‚è€ƒï¼šhttps://github.com/esp-rs/esp-idf-sys/blob/master/BUILD-OPTIONS.md#esp-idf-configuration</span>
<span class="token punctuation">[</span><span class="token table class-name">env</span><span class="token punctuation">]</span>
<span class="token key property">MCU</span><span class="token punctuation">=</span><span class="token string">"esp32s3"</span>
<span class="token comment"># Note: this variable is not used by the pio builder (`cargo build --features pio`)</span>
<span class="token comment"># æœ€æ–° esp-idf ç‰ˆæœ¬ï¼šhttps://github.com/espressif/esp-idf/releases</span>
<span class="token key property">ESP_IDF_VERSION</span> <span class="token punctuation">=</span> <span class="token string">"v5.2.q"</span>

<span class="token comment"># ä½¿ç”¨å…¨å±€ ~/.espressif/ å·¥å…·é“¾ï¼Œé»˜è®¤æ˜¯ by é¡¹ç›® workspace çš„ã€‚</span>
<span class="token key property">ESP_IDF_TOOLS_INSTALL_DIR</span> <span class="token punctuation">=</span> <span class="token string">"global"</span></span></span></span></code></pre><div id="https://www.notion.so/2271d926bf344c15ae306f497fd89852" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">sccache </code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">ç»Ÿè®¡ä¿¡æ¯:</mark></span></span></p></div><div id="https://www.notion.so/7de8966af37142c7927c24f7270cd00a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> </mark></span></span></p></div><pre id="https://www.notion.so/ed76ab5d7fe74f579b0a4f5e4fb4ab97" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>zj@a:~/code/esp32/myespv3$ sccache --show-stats
Compile requests                      <span class="token number">0</span>
Compile requests executed             <span class="token number">0</span>
Cache hits                            <span class="token number">0</span>
Cache misses                          <span class="token number">0</span>
Cache timeouts                        <span class="token number">0</span> 
Cache <span class="token builtin class-name">read</span> errors                     <span class="token number">0</span>
Forced recaches                       <span class="token number">0</span>
Cache <span class="token function">write</span> errors                    <span class="token number">0</span>
Compilation failures                  <span class="token number">0</span>
Cache errors                          <span class="token number">0</span>
Non-cacheable compilations            <span class="token number">0</span>
Non-cacheable calls                   <span class="token number">0</span>
Non-compilation calls                 <span class="token number">0</span>
Unsupported compiler calls            <span class="token number">0</span>
Average cache <span class="token function">write</span>               <span class="token number">0.000</span> s
Average compiler                  <span class="token number">0.000</span> s
Average cache <span class="token builtin class-name">read</span> hit            <span class="token number">0.000</span> s
Failed distributed compilations       <span class="token number">0</span>
Cache location                  Local disk: <span class="token string">"/Users/alizj/Library/Caches/Mozilla.sccache"</span>
Use direct/preprocessor mode?   <span class="token function">yes</span>
Version <span class="token punctuation">(</span>client<span class="token punctuation">)</span>                <span class="token number">0.7</span>.7
Max cache size                       <span class="token number">10</span> GiB</span></span></span></code></pre><div id="https://www.notion.so/94523c2a94304dd99bdbc78cea3ce3e1" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">å‚è€ƒ:</mark></span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/7a3d6c3d844f45d287f2b5ff59730d4b" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/esp-rs/std-training"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">esp-rs/std-trainning</mark></a></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">: Embedded Rust Trainings for Espressif</mark></span></span></li><li id="https://www.notion.so/55e48d4b02a04c54bb6f96791562ae10" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/ivmarkov/rust-esp32-std-demo%EF%BC%9A"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">https://github.com/ivmarkov/rust-esp32-std-demo%EF%BC%9A</mark></a></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> Rust on ESP32 STD demo app</mark></span></span></li><li id="https://www.notion.so/cce9d9cf48c4414b93768a2646cbea1c" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://apollolabsblog.hashnode.dev/series/esp32-std-embedded-rust%EF%BC%9A"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">https://apollolabsblog.hashnode.dev/series/esp32-std-embedded-rust%EF%BC%9A</mark></a></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> å¼ºçƒˆæ¨èã€‚</mark></span></span></li><li id="https://www.notion.so/69b93ed656114465bb7ef98e45645212" class="NumberedList" value="4"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/apollolabsdev/ESP32C3"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">https://github.com/apollolabsdev/ESP32C3</mark></a></span></span></li></ol><div id="https://www.notion.so/fcf4b2a6a1a64816b4c538ca0aae3415" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><ul id="https://www.notion.so/4136c88ff13d487eb93ad82faebadc63" class="ColorfulBlock ColorfulBlock--ColorGray TableOfContents"><li class="TableOfContents__Item"><a href="#https://www.notion.so/ccd95b333796404b85b472ab6a46c8e8"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">å¯¹äº std åº”ç”¨</mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/cb2b2b479ff24841b42b95c834da4dd8"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">ä½¿ç”¨ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">esp-rs/esp-idf-template</mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> æ¨¡æ¿</mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/32020fd8821a4a4d9e0852a204bbec46"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">æŒ‰éœ€ä¿®æ”¹ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">Cargo.toml</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">ï¼š</mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/db9b662178504b609e66c7a0737ab6f4"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">ä¿®æ”¹ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">.cargo/config.toml</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> </mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/9662be3579fc44bd84b1dcceace26e5a"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">æŒ‰éœ€ä¿®æ”¹ esp-idf çš„é…ç½®å‚æ•°æ–‡ä»¶</mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/a58d875ced0c441fb32f5a70fbef40ce"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">æŒ‰éœ€ä¿®æ”¹ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">rust-toolchain.toml</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> </mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/46a6fccd60a748048f18ea57639baacd"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">æ„å»ºé¡¹ç›®ï¼š</mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/8885e11752484ec4a677b2f5adbb9a0a"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">1 ä¸º Rust std åº”ç”¨æ·»åŠ ç»„ä»¶ component </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">#</mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/e19eea356cf04bb9b882d5018fbb16eb"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">2 é…ç½® </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">esp-rs</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> é¡¹ç›®çš„ </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">esp-idf-sys</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> å‚æ•° </mark></span></span></div></a></li></ul></article>
    <aside class="UDAside">
        <a href="#content-html"><div id="up">â¬†ï¸</div></a>
        <a href="#message-board"><div id="down">â¬‡ï¸</div></a>
    </aside>
    <div id="message-board"></div>
    <aside class ="utterances">
      <script src="https://utteranc.es/client.js"
      repo="syx-413/syx-413.github.io"
      issue-term="pathname"
      theme="boxy-light"
      crossorigin="anonymous"
      async>
  </script>
  </aside>
  <footer class="Footer">
  <div>
    &copy; 413â€™s Website 2020~2025
  </div>
  <div>
    &centerdot;
  </div>
  <div>
    Powered by
    <a href="https://github.com/syx-413" target="_blank" rel="noopener noreferrer"> notablog</a>.
  </div>
</footer>
</body>

</html>