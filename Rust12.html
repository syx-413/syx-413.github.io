<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- Chrome, Firefox OS and Opera Status Bar Color -->
<meta name="theme-color" content="#FFFFFF">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/themes/prism.min.css">
<link rel="stylesheet" type="text/css" href="css/SourceSansPro.css">
<link rel="stylesheet" type="text/css" href="css/theme.css">
<link rel="stylesheet" type="text/css" href="css/notablog.css">
<!-- Favicon -->

<link rel="shortcut icon" href="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🥥&lt;/text&gt;&lt;/svg&gt;">


<style>
  :root {
    font-size: 20px;
}
</style>
  <title>
    Rust 驱动 LCD - 显示图片&nbsp;|&nbsp;413’s Website
  </title>
  <meta property="og:type" content="blog">
  <meta property="og:title" content="Rust 驱动 LCD - 显示图片">
  
  <meta name="description" content="JPEG解码 硬件编码 解码">
  <meta property="og:description" content="JPEG解码 硬件编码 解码">
  
  
  <meta property="og:image" content="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🦀&lt;/text&gt;&lt;/svg&gt;">
  
  <style>
    .DateTagBar {
      margin-top: 1.0rem;
    }
  </style>
</head>

<body>
  <nav class="Navbar">
  <a href="index.html">
    <div class="Navbar__Btn">
      
      <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🥥&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
      
      <span>Home</span>
    </div>
  </a>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <span class="Navbar__Delim">&centerdot;</span>
  <a href="blog-collection.html">
    <div class="Navbar__Btn">
      
      <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🥅&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
      
      <span>blog mark</span>
    </div>
  </a>
  
  
  
  
  
  
  
  
  
  
  
  <span class="Navbar__Delim">&centerdot;</span>
  <a href="Note.html">
    <div class="Navbar__Btn">
      
      <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🎶&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
      
      <span>Note</span>
    </div>
  </a>
  
  
  
  
  
  
  
  <span class="Navbar__Delim">&centerdot;</span>
  <a href="reference.html">
    <div class="Navbar__Btn">
      
      <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;😷&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
      
      <span>杂项</span>
    </div>
  </a>
  
  
  
  <span class="Navbar__Delim">&centerdot;</span>
  <a href="About.html">
    <div class="Navbar__Btn">
      
      <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;😀&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
      
      <span>About</span>
    </div>
  </a>
  
  
</nav>
  <header class="Header">
    
    <div class="Header__Spacer Header__Spacer--NoCover">
    </div>
    
    <div class="Header__Icon">
      <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🦀&lt;/text&gt;&lt;/svg&gt;"></span>
    </div>
    
    <h1 class="Header__Title">
      Rust 驱动 LCD - 显示图片
    </h1>
    
    <div class="DateTagBar">
      
      <span class="DateTagBar__Item DateTagBar__Date">Posted on Mon, Sep 2, 2024</span>
      
      
      <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--purple">
        <a href="tag/Rust.html">
          Rust
        </a>
      </span>
      
      <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--red">
        <a href="tag/单片机.html">
          单片机
        </a>
      </span>
      
    </div>
    
  </header>
  <article id="https://www.notion.so/585d3ae54a0341fbaa29a5cfc3328dc3" class="PageRoot"><div id="https://www.notion.so/a69aa32ca1e248f4a26428139b124daf" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">一个 LCD 小游戏：</mark></span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/georgik/esp32-spooky-maze-game/blob/main/esp32-s3-usb-otg/src/main.rs"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">esp32-spooky-maze-game</mark></a></span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/0fce70bcf7c74193866dbc22354f0b3e" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">使用的是 mipidsi::Builder::st7789，需要修改为 st7735s，支持按键。</mark></span></span></li><li id="https://www.notion.so/0349b3e6766e485c84411d4ff72f1678" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">xtensa-esp32s3-none-elf non_std 应用。</mark></span></span></li></ul><div id="https://www.notion.so/12cafb793ee94a5db2b1ba73c5e182e8" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">另外一个 LCD 项目样例： </mark></span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/georgik/esp32-rust-multi-target-template/blob/main/esp32-s3-usb-otg/src/main.rs"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">https://github.com/georgik/esp32-rust-multi-target-template/blob/main/esp32-s3-usb-otg/src/main.rs</mark></a></span></span></p></div><div id="https://www.notion.so/8de3a4efef0b4a0f808e2cb72ee03510" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">ESP Display Interface with SPI and DMA： </mark></span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/georgik/esp-display-interface-spi-dma/blob/main/README.md"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">https://github.com/georgik/esp-display-interface-spi-dma/blob/main/README.md</mark></a></span></span></p></div><div id="https://www.notion.so/dfa4eb6e66a0449fad8dbd419dd58edd" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">参考文档：</mark></span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/63318c824a6a4c368f3410aec3ac4d73" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://docs.espressif.com/projects/esp-iot-solution/en/latest/display/lcd/index.html"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">https://docs.espressif.com/projects/esp-iot-solution/en/latest/display/lcd/index.html</mark></a></span></span></li><li id="https://www.notion.so/c7d08b6046ad48f48b609ebd95891698" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://www.makerfabs.com/esp32-3-5-inch-tft-touch-capacitive-with-camera.html"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">https://www.makerfabs.com/esp32-3-5-inch-tft-touch-capacitive-with-camera.html</mark></a></span></span></li></ol><div id="https://www.notion.so/f73bfb735b3e4872983d79411a878eb1" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">LCD 和 Touch 一般集成在一块屏幕上（部分 Touch 还支持固定的触摸按钮），所以 esp-idf 提供了 lcd_panel 对象来综合管理 LCD 和 Touch。</mark></span></span></p></div><div id="https://www.notion.so/4fcaf5d57f1f4f6bbd0702f1a67c878f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">常用 LCD 接口：</mark></span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/28eec7a2a91446e9a8886b2b7566472a" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">SPI：1 bit 数据线，LCD 需要支持 GRAM；</mark></span></span></li><li id="https://www.notion.so/244bcd8f62a240878f6cc3ee647a5c2f" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">QSPI（Quad-SPI）：4 bit 数据线，LCD 或 MCU 需要支持 GRAM；</mark></span></span></li><li id="https://www.notion.so/7e2718d6d90443b8a63e0cad0a8db34d" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">I80 或称 I8080（DBI）: 8/16 bit 数据线，基于 I80 总线协议， </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">LCD 需要支持 GRAM</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> ；</mark></span></span></li><li id="https://www.notion.so/e6afb0ff3d5341eb994f82292978646b" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">RGB（DPI）：8/16/18/24 bit 数据线，LCD 不需要支持 GRAM， </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">一般和 3线 SPI 共用</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> 。</mark></span></span><ul class="BulletedListWrapper"><li id="https://www.notion.so/37b8fadd127e4318b3cc4d75a08ca8c8" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">Camera 一般也使用 RGB 接口，包含 HSYNC/VSYNC 信号，所以在 esp-idf 库中 module 为 lcd_camera.</mark></span></span></li></ul></li><li id="https://www.notion.so/281924aac4794e7b93038652c22695d1" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">MIPI-DSI：1/2/3/4 bit 串行接口，使用高速差分信号和 D-PHY 收发器（类似于 USB），目前只有 ESP32-P4 支持。属于传输速率最快的接口</mark></span></span></li></ul><div id="https://www.notion.so/7c70c62433214f4e9b56812d7cc57c6a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://docs.espressif.com/projects/esp-iot-solution/en/latest/display/lcd/lcd_guide.html"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">https://docs.espressif.com/projects/esp-iot-solution/en/latest/display/lcd/lcd_guide.html</mark></a></span></span></p></div><div id="https://www.notion.so/d80f701f856b4880a707d35b194dd9bf" class="Image Image--PageWidth"><figure><a href="#?width=834"><img src="#?width=834" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/bcb8bb7a9c34441488f19ea54f56b311" class="Image Image--PageWidth"><figure><a href="#?width=834"><img src="#?width=834" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/b450b3e3aa6244429caae01f70994812" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/espressif/esp-idf/tree/master/examples/peripherals/lcd"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">esp-idf/examples/peripherals/lcd/</mark></a></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> 目录包含这些接口的 LCD 驱动：</mark></span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/a4c1772e26884b24871ffcc30e601ab0" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">i2c_oled：一般是小型的 OLED LCD 屏幕使用 I2C；</mark></span></span></li><li id="https://www.notion.so/8aede1ac43304f798917073dbdea8361" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">i80_controller：Intel 8080 interfaced</mark></span></span></li><li id="https://www.notion.so/bd396cc4ae3d4823a1707db8ab9c65cb" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">mipi_dsi：最高效的串行接口；</mark></span></span></li><li id="https://www.notion.so/a5b8d1768fff465aab4f3fb85ba0c643" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">rgb_panel</mark></span></span></li><li id="https://www.notion.so/2b4958e43d244bb5bebd9174ff1ed8c6" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">spi_lcd_touch</mark></span></span></li><li id="https://www.notion.so/c74e8a338f5947b89f6b362486dbca49" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">tjpgd ：JPEG 软解压库；</mark></span></span></li></ul><div id="https://www.notion.so/058dd187e1744d408dfc58e4d797ae8b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/espressif/esp-iot-solution/tree/ce4c75dc/examples/display/lcd"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">esp-iot-solution/examples/display/lcd/</mark></a></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> 目录也包含一些 LCD 例子：</mark></span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/7e2cf4024057452ea3cb8c0a8af8357f" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">lcd_with_te</mark></span></span></li><li id="https://www.notion.so/59ddc824c03348029b45f4c0bce3d991" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">qspi_with_ram</mark></span></span></li><li id="https://www.notion.so/2c08e83e184a4e489804de15921fc40a" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">qspi_without_ram</mark></span></span></li><li id="https://www.notion.so/9bf06643126b43b485d5d4f303c118d8" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">rgb_avoid_tearing</mark></span></span></li><li id="https://www.notion.so/d5a92b1355824d95994693f790d698c8" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">rgb_lcd_8bit</mark></span></span></li></ul><h2 id="https://www.notion.so/d9cac5a6d0e241149f1e33770327fd8e" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/d9cac5a6d0e241149f1e33770327fd8e"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">1 显示 raw 图片 </mark></span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://blog.opsnull.com/rust-embedded/rust-esp32-lcd-picture/#%E6%98%BE%E7%A4%BA-raw-%E5%9B%BE%E7%89%87"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">#</mark></a></span></span></h2><div id="https://www.notion.so/cac7a2c3688d4b34a53a4e4503f4ab74" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">raw 图片是指 RGB888/RGB565 等格式的图片。</mark></span></span></p></div><div id="https://www.notion.so/52b243be8a7b4f98ab515c80deda4300" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">像素格式主要分为 YUV 和 RGB 两种大类：</mark></span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/0cadacbb06bd4ba59fb7f30ac962e1c3" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">YUV422: 也称为 YCbCr：Y 亮度，U/Cb：蓝色浓度，V/Cr：红色浓度；</mark></span></span><ul class="BulletedListWrapper"><li id="https://www.notion.so/d8c927552cd44d2d877b183b934b8b13" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">为了节省带宽 YUV frame 一般使用采样，如 YUV422 表示 2:1的水平取样，垂直完全采样；</mark></span></span></li></ul></li><li id="https://www.notion.so/a26116b28ac344e3bdeb33d1d41d9469" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">RGB888：也称 24-bit RGB，各使用 8bit 来表示 red/green/blue；</mark></span></span></li><li id="https://www.notion.so/c934efc8dbf045beb61d06c7f100601f" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">RGB666: 也称 18-bit RGB</mark></span></span></li><li id="https://www.notion.so/35e5eaf2da87454e8e94e61f9e8a4508" class="NumberedList" value="4"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">RGB565：也称 16-bit RGB，5 bits for the red channel, 6 bits for the green channel, and 5 bits for the blue channel. 相比 RGB888，更节省资源；</mark></span></span></li></ol><div id="https://www.notion.so/0abb4b4f280b475b9726b22f413ee1c8" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">YUV 和 RGB 之间可以相互转换。</mark></span></span></p></div><div id="https://www.notion.so/1b3658f0e78f483b87080f5262bd14ec" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">LCD 一般使用 RGB 像素格式，而且是比较节省空间的 16-bit 的 RGB565 像素格式：</mark></span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/d89ea525bbde41409b2e3ed9b73cfb3f" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">camera 可以直接产生 RGB565 数据，可以直接在 LCD 显示；</mark></span></span></li><li id="https://www.notion.so/53bf0d841fd24280a43da4d7441edd84" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">bmp/png/jpeg 等图片格式，需要将像素转换为 RGB565 后才能供 LCD 显示；</mark></span></span></li></ul><div id="https://www.notion.so/cffa329baa5942a4ab3473fd47f5b0b2" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">需要将 JPEG 解码或 bmp 中的像素数据转换为 RGB888, RGB565 等格式的 raw picture 后，LCD 才能直接显示。</mark></span></span></p></div><div id="https://www.notion.so/1d6bdb12c4fc4f53a01a842eb3e6cf43" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">Copy</mark></span></span></p></div><div id="https://www.notion.so/76291580fe65443287f89f12d116b82d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">或者使用 LVGL 提供的在线转换工具：</mark></span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://lvgl.io/tools/imageconverter"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">https://lvgl.io/tools/imageconverter</mark></a></span></span></p></div><div id="https://www.notion.so/3666c8b16c2348faaeeb41aa6e5d7c9c" class="Image Image--PageWidth"><figure><a href="#?width=834"><img src="#?width=834" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/18333c83a8c8409a8e3294a0e5a25ca4" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">可以使用 OpenCV 库来显示 raw data picutre：</mark></span></span></p></div><div id="https://www.notion.so/c58b6d41ae734d93adca7979758cecc8" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">Copy</mark></span></span></p></div><pre id="https://www.notion.so/bfb39069a2584ab7be97cef9866e3bfe" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span># https://github.com/espressif/esp-idf/blob/master/examples/peripherals/jpeg/jpeg_decode/open_raw_picture.py

# SPDX-FileCopyrightText: 2024 Espressif Systems (Shanghai) CO LTD
# SPDX-License-Identifier: Unlicense OR CC0-1.0
import argparse

import cv2 as cv
import numpy as np
from numpy.typing import NDArray


def open_picture(path):  # type: (str) -&gt; list[int]
    with open(path, &#x27;rb&#x27;) as f:
        data = f.read()
        f.close()
    new_data = [int(x) for x in data]
    return new_data


def picture_show_rgb888(data, h, w):  # type: (list[int], int, int) -&gt; None
    data = np.array(data).reshape(h, w, 3).astype(np.uint8)
    cv.imshow(&#x27;data&#x27;, data)
    cv.waitKey()


def picture_show_rgb565(data, h, w):  # type: (list[int], int, int) -&gt; None

    new_data = [0] * ((len(data) // 2) * 3)
    for i in range(len(data)):
        if i % 2 != 0:
            new_data[3 * (i - 1) // 2 + 2] = (data[i] &amp; 0xf8)
            new_data[3 * (i - 1) // 2 + 1] |= (data[i] &amp; 0x7) &lt;&lt; 5
        else:
            new_data[3 * i // 2] = (data[i] &amp; 0x1f) &lt;&lt; 3
            new_data[3 * i // 2 + 1] |= (data[i] &amp; 0xe0) &gt;&gt; 3

    new_data = np.array(new_data).reshape(h, w, 3).astype(np.uint8)
    cv.imshow(&#x27;data&#x27;, new_data)
    cv.waitKey()


def picture_show_gray(data, h, w):  # type: (list[int], int, int) -&gt; None
    new_data = np.array(data).reshape(h, w, 1).astype(np.uint8)
    cv.imshow(&#x27;data&#x27;, new_data)
    cv.waitKey()


def convert_YUV_to_RGB(Y, U, V):  # type: (NDArray, NDArray, NDArray) -&gt; tuple[NDArray, NDArray, NDArray]
    B = np.clip(Y + 1.7790 * (U - 128), 0, 255).astype(np.uint8)
    G = np.clip(Y - 0.3455 * (U - 128) - 0.7169 * (V - 128), 0, 255).astype(np.uint8)
    R = np.clip(Y + 1.4075 * (V - 128), 0, 255).astype(np.uint8)

    return B, G, R


def picture_show_yuv420(data, h, w):  # type: (list[int], int, int) -&gt; None
    new_u = [0] * (h * w)
    new_v = [0] * (h * w)
    new_y = [0] * (h * w)

    for i in range(int(h * w * 1.5)):
        is_even_row = ((i // (w * 1</span></span><span class="SemanticString"><span>.5)) % 2 == 0)
        if is_even_row:
            if (i % 3 == 0):
                new_u[(i // 3) * 2] = data[i]
                new_u[(i // 3) * 2 + 1] = data[i]
        else:
            if (i % 3 == 0):
                new_u[(i // 3) * 2] = new_u[int((i - (w * 1.5)) // 3) * 2]
                new_u[(i // 3) * 2 + 1] = new_u[int((i - (w * 1.5)) // 3) * 2 + 1]

    for i in range(int(h * w * 1.5)):
        if (i // (w * 1.5)) % 2 != 0 and (i % 3 == 0):
            idx = (i // 3) * 2
            new_v[idx] = data[i]
            new_v[idx + 1] = data[i]

    for i in range(int(h * w * 1.5)):
        if (i // (w * 1.5)) % 2 == 0 and (i % 3 == 0):
            idx = (i // 3) * 2
            new_v[idx] = new_v[int((i + (w * 1.5)) // 3) * 2]
            new_v[idx + 1] = new_v[int((i + (w * 1.5)) // 3) * 2 + 1]

    new_y = [data[i] for i in range(int(h * w * 1.5)) if i % 3 != 0]

    Y = np.array(new_y)
    U = np.array(new_u)
    V = np.array(new_v)

    B, G, R = convert_YUV_to_RGB(Y, U, V)
    # Merge channels
    new_data = np.stack((B, G, R), axis=-1)
    new_data = np.array(new_data).reshape(h, w, 3).astype(np.uint8)

    # Display the image
    cv.imshow(&#x27;data&#x27;, new_data)
    cv.waitKey()


def picture_show_yuv422(data, h, w):  # type: (list[int], int, int) -&gt; None
    # Reshape the input data to a 2D array
    data_array = np.array(data).reshape(h, w * 2)

    # Separate Y, U, and V channels
    Y = data_array[:, 1::2]
    U = data_array[:, 0::4].repeat(2, axis=1)
    V = data_array[:, 2::4].repeat(2, axis=1)

    # Convert YUV to RGB
    B, G, R = convert_YUV_to_RGB(Y, U, V)

    # Merge channels
    new_data = np.stack((B, G, R), axis=-1)

    # Display the image
    cv.imshow(&#x27;data&#x27;, new_data)
    cv.waitKey()


def picture_show_yuv444(data, h, w):  # type: (list[int], int, int) -&gt; None
    # Reshape the input data to a 2D array
    data_array = np.array(data).reshape(h, w * 3)

    # Separate Y, U, and V channels
    Y = data_array[:, 2::3]
    U = data_array</span></span><span class="SemanticString"><span>[:, 1::3]
    V = data_array[:, 0::3]

    # Convert YUV to RGB
    B, G, R = convert_YUV_to_RGB(Y, U, V)

    # Merge channels
    new_data = np.stack((B, G, R), axis=-1)

    # Display the image
    cv.imshow(&#x27;data&#x27;, new_data)
    cv.waitKey()


def main():  # type: () -&gt; None
    parser = argparse.ArgumentParser(description=&#x27;which mode need to show&#x27;)

    parser.add_argument(
        &#x27;--pic_path&#x27;,
        type=str,
        help=&#x27;What is the path of your picture&#x27;,
        required=True)

    parser.add_argument(
        &#x27;--pic_type&#x27;,
        type=str,
        help=&#x27;What type you want to show&#x27;,
        required=True,
        choices=[&#x27;rgb565&#x27;, &#x27;rgb888&#x27;, &#x27;gray&#x27;, &#x27;yuv422&#x27;, &#x27;yuv420&#x27;, &#x27;yuv444&#x27;])

    parser.add_argument(
        &#x27;--height&#x27;,
        type=int,
        help=&#x27;the picture height&#x27;,
        default=480)

    parser.add_argument(
        &#x27;--width&#x27;,
        type=int,
        help=&#x27;the picture width&#x27;,
        default=640)

    args = parser.parse_args()

    height = args.height
    width = args.width

    data = open_picture(args.pic_path)
    if (args.pic_type == &#x27;rgb565&#x27;):
        picture_show_rgb565(data, height, width)
    elif (args.pic_type == &#x27;rgb888&#x27;):
        picture_show_rgb888(data, height, width)
    elif (args.pic_type == &#x27;gray&#x27;):
        picture_show_gray(data, height, width)
    elif (args.pic_type == &#x27;yuv420&#x27;):
        picture_show_yuv420(data, height, width)
    elif (args.pic_type == &#x27;yuv422&#x27;):
        picture_show_yuv422(data, height, width)
    elif (args.pic_type == &#x27;yuv444&#x27;):
        picture_show_yuv444(data, height, width)
    else:
        print(&#x27;This type is not supported in this script!&#x27;)


if __name__ == &#x27;__main__&#x27;:
    main()</span></span></span></code></pre><h2 id="https://www.notion.so/ece6f8c0a4d94e05841d327cbf2efb2f" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/ece6f8c0a4d94e05841d327cbf2efb2f"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">2 显示 png 图片 </mark></span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://blog.opsnull.com/rust-embedded/rust-esp32-lcd-picture/#%E6%98%BE%E7%A4%BA-png-%E5%9B%BE%E7%89%87"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">#</mark></a></span></span></h2><div id="https://www.notion.so/50c5347b38d54d858d7f0b537b04f1db" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">使用如下 python 代码将 png 图片转换为 raw RGB 565 format：</mark></span></span></p></div><div id="https://www.notion.so/68b6f147259843e5bb95473a42d21722" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">Copy</mark></span></span></p></div><pre id="https://www.notion.so/65ae3ec1564a46a4baa07ff6e1939b99" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>#!/usr/bin/python

import sys
from PIL import Image

if len(sys.argv) == 3:
    # print &quot;\nReading: &quot; + sys.argv[1]
    out = open(sys.argv[2], &quot;wb&quot;)
elif len(sys.argv) == 2:
    out = sys.stdout
else:
    print &quot;Usage: png2fb.py infile [outfile]&quot;
    sys.exit(1)

im = Image.open(sys.argv[1])

if im.mode == &quot;RGB&quot;:
    pixelSize = 3
elif im.mode == &quot;RGBA&quot;:
    pixelSize = 4
else:
    sys.exit(&#x27;not supported pixel mode: &quot;%s&quot;&#x27; % (im.mode))

pixels = im.tostring()
pixels2 = &quot;&quot;
for i in range(0, len(pixels) - 1, pixelSize):
    pixels2 += chr(ord(pixels[i + 2]) &gt;&gt; 3 | (ord(pixels[i + 1]) &lt;&lt; 3 &amp; 0xe0))
    pixels2 += chr(ord(pixels[i]) &amp; 0xf8 | (ord(pixels[i + 1]) &gt;&gt; 5 &amp; 0x07))
out.write(pixels2)
out.close()</span></span></span></code></pre><h2 id="https://www.notion.so/0fa7bfd08b3a41abad808109e5bb9a77" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/0fa7bfd08b3a41abad808109e5bb9a77"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">3 显示 bmp 图片 </mark></span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://blog.opsnull.com/rust-embedded/rust-esp32-lcd-picture/#%E6%98%BE%E7%A4%BA-bmp-%E5%9B%BE%E7%89%87"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">#</mark></a></span></span></h2><div id="https://www.notion.so/5bd48f36f7a9423f92d8c942d6dbc573" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">bmp 图片是未经压缩的像素 bit 文件，包含 header + 像素数据，不需要解压缩和转码，可以直接读取，转换为 RGB 565 格式：</mark></span></span></p></div><div id="https://www.notion.so/a8a58b1442594b8fa0424dc97108892d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">Copy</mark></span></span></p></div><pre id="https://www.notion.so/af732433cece4675b161d83760b04326" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>// https://github.com/Makerfabs/Project_Touch-Screen-Camera/blob/master/example/SD2TFT/SD2TFT.ino#L205

int print_img(fs::FS &amp;fs, String filename)
{
    SPI_ON_SD;
    File f = fs.open(filename);
    if (!f)
    {
        Serial.println(&quot;Failed to open file for reading&quot;);
        return 0;
    }

    f.seek(54);
    int X = 480;
    int Y = 320;
    uint8_t RGB[3 * X];
    for (int row = 0; row &lt; Y; row++)
    {
        f.seek(54 + 3 * X * row);
        f.read(RGB, 3 * X);
        SPI_OFF_SD;
        SPI_ON_TFT;
        for (int col = 0; col &lt; X; col++)
        {
            tft.drawPixel(col, row, tft.color565(RGB[col * 3 + 2], RGB[col * 3 + 1], RGB[col * 3]));
        }
        SPI_OFF_TFT;
        SPI_ON_SD;
    }

    f.close();
    SPI_OFF_SD;
    return 0;
}</span></span></span></code></pre><h2 id="https://www.notion.so/0e91b468062f48f5ae7f36271c7332a3" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/0e91b468062f48f5ae7f36271c7332a3"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">4 显示 jpeg 图片 </mark></span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://blog.opsnull.com/rust-embedded/rust-esp32-lcd-picture/#%E6%98%BE%E7%A4%BA-jpeg-%E5%9B%BE%E7%89%87"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">#</mark></a></span></span></h2><div id="https://www.notion.so/0fa3a8d7aee64477aaf8c7f1199d2145" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">JPEG 是压缩图片格式，在 LCD 显示前需要先对其进行解压缩和解码，转换为 LCD 上显示的 RGB 像素数据（raw picture），如 JPEG_RAW_TYPE_RGB565_BE：</mark></span></span></p></div><div id="https://www.notion.so/dc432970344d4ee2bae237d70eb17eab" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">Copy</mark></span></span></p></div><pre id="https://www.notion.so/42f0c0b9309b415099ee4ae2fa5d80d6" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>// https://github.com/espressif/esp-box/blob/master/examples/usb_camera_lcd_display/main/main.c#L56

// 将 JPEG 解码为 JPEG_RAW_TYPE_RGB565_BE 输出格式
static jpeg_error_t esp_jpeg_decoder_one_picture(uint8_t *input_buf, int len, uint8_t *output_buf)
{
    esp_err_t ret = ESP_OK;
    // Generate default configuration
    jpeg_dec_config_t config = DEFAULT_JPEG_DEC_CONFIG();
    config.output_type = JPEG_RAW_TYPE_RGB565_BE;
    // Empty handle to jpeg_decoder
    jpeg_dec_handle_t jpeg_dec = NULL;

    // Create jpeg_dec
    jpeg_dec = jpeg_dec_open(&amp;config);

    // Create io_callback handle
    jpeg_dec_io_t *jpeg_io = calloc(1, sizeof(jpeg_dec_io_t));
    if (jpeg_io == NULL)
    {
        return ESP_FAIL;
    }

    // Create out_info handle
    jpeg_dec_header_info_t *out_info = calloc(1, sizeof(jpeg_dec_header_info_t));
    if (out_info == NULL)
    {
        return ESP_FAIL;
    }
    // Set input buffer and buffer len to io_callback
    jpeg_io-&gt;inbuf = input_buf;
    jpeg_io-&gt;inbuf_len = len;

    // Parse jpeg picture header and get picture for user and decoder
    ret = jpeg_dec_parse_header(jpeg_dec, jpeg_io, out_info);
    if (ret &lt; 0)
    {
        goto _exit;
    }

    jpeg_io-&gt;outbuf = output_buf;
    int inbuf_consumed = jpeg_io-&gt;inbuf_len - jpeg_io-&gt;inbuf_remain;
    jpeg_io-&gt;inbuf = input_buf + inbuf_consumed;
    jpeg_io-&gt;inbuf_len = jpeg_io-&gt;inbuf_remain;

    // Start decode jpeg raw data
    ret = jpeg_dec_process(jpeg_dec, jpeg_io);
    if (ret &lt; 0)
    {
        goto _exit;
    }

_exit:
    // Decoder deinitialize
    jpeg_dec_close(jpeg_dec);
    free(out_info);
    free(jpeg_io);
    return ret;
}


static void _camera_display(uint8_t *lcd_buffer)
{
    bsp_display_lock(0);
    // 使用 LVGL 显示解码后的 JPEG 数据
    lv_canvas_set_buffer(camera_canvas, lcd_buffer, current_width, current_height, LV_IMG_CF_TRUE_COLOR);
    lv_label_set_text_fmt(label, &quot;#FF0000 %d*%d#&quot;, current_width, current_height);
    bsp_display_unlock();
}


static void camera_frame_cb(</span></span><span class="SemanticString"><span>uvc_frame_t *frame, void *ptr)
{
    ESP_LOGI(TAG, &quot;uvc callback! frame_format = %d, seq = %&quot; PRIu32 &quot;, width = %&quot; PRIu32 &quot;, height = %&quot; PRIu32 &quot;, length = %u, ptr = %d&quot;,
             frame-&gt;frame_format, frame-&gt;sequence, frame-&gt;width, frame-&gt;height, frame-&gt;data_bytes, (int)ptr);
    if (current_width != frame-&gt;width || current_height != frame-&gt;height)
    {
        current_width = frame-&gt;width;
        current_height = frame-&gt;height;
        adaptive_jpg_frame_buffer(current_width * current_height * 2);
    }

    esp_jpeg_decoder_one_picture((uint8_t *)frame-&gt;data, frame-&gt;data_bytes, jpg_frame_buf); // 解码 JPEG
    _camera_display(jpg_frame_buf); // 显示
    vTaskDelay(pdMS_TO_TICKS(1));
}</span></span></span></code></pre><div id="https://www.notion.so/73f41c4697fb411e9a97bf6ea613d12a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">上面代码使用的 esp_jpeg </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">软件解码库</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> </mark></span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/espressif/idf-extra-components/tree/master/esp_jpeg"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">JPEG Decoder: TJpgDec -Tiny JPEG Decompressor</mark></a></span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/d6b2fa0f1c1e4785b7a0a1d5877307d6" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">Output Pixel Format: RGB888, RGB565</mark></span></span></li><li id="https://www.notion.so/67924dbb736c47bdbcf0c73be33da8ca" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">Scaling Ratio: 1/1, 1/2, 1/4 or 1/8 Selectable on Decompression</mark></span></span></li></ul><div id="https://www.notion.so/e565d2941c354730be189fbe72dfbc2b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">另一个 </mark></span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/espressif/esp-idf/tree/master/examples/peripherals/lcd/tjpgd"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">LCD tjpgd example</mark></a></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">：This example shows how to decode a jpeg image and display it on an SPI-interfaced LCD, and rotates the image periodically.</mark></span></span></p></div><div id="https://www.notion.so/31604b70948f49d1b6851bfb4fea9e78" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">Copy</mark></span></span></p></div><pre id="https://www.notion.so/7bc2ada96055474e99947a6d7ac29aaf" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>// https://github.com/espressif/esp-idf/blob/master/examples/peripherals/lcd/tjpgd/main/decode_image.c

//Decode the embedded image into pixel lines that can be used with the rest of the logic.
esp_err_t decode_image(uint16_t **pixels)
{
    *pixels = NULL;
    esp_err_t ret = ESP_OK;

    //Alocate pixel memory. Each line is an array of IMAGE_W 16-bit pixels; the `*pixels` array itself contains pointers to these lines.
    *pixels = calloc(IMAGE_H * IMAGE_W, sizeof(uint16_t));
    ESP_GOTO_ON_FALSE((*pixels), ESP_ERR_NO_MEM, err, TAG, &quot;Error allocating memory for lines&quot;);

    //JPEG decode config
    esp_jpeg_image_cfg_t jpeg_cfg = {
        .indata = (uint8_t *)image_jpg_start,
        .indata_size = image_jpg_end - image_jpg_start,
        .outbuf = (uint8_t*)(*pixels),
        .outbuf_size = IMAGE_W * IMAGE_H * sizeof(uint16_t),
        .out_format = JPEG_IMAGE_FORMAT_RGB565,
        .out_scale = JPEG_IMAGE_SCALE_0,
        .flags = {
            .swap_color_bytes = 1,
        }
    };

    //JPEG decode
    esp_jpeg_image_output_t outimg;
    esp_jpeg_decode(&amp;jpeg_cfg, &amp;outimg);

    ESP_LOGI(TAG, &quot;JPEG image decoded! Size of the decoded image is: %dpx x %dpx&quot;, outimg.width, outimg.height);

    return ret;
err:
    //Something went wrong! Exit cleanly, de-allocating everything we allocated.
    if (*pixels != NULL) {
        free(*pixels);
    }
    return ret;
}</span></span></span></code></pre><div id="https://www.notion.so/3f6c17b71c314585a4c1c7c31f90b5d3" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">对于 JPEG 解码生成的可以 LCD 显示的 RGB888, RGB565 等格式的 raw picture， 可以使用 OpenCV 库来显示：</mark></span></span></p></div><div id="https://www.notion.so/a5647e69211a40c5816215c5e4ea93e3" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">Copy</mark></span></span></p></div><pre id="https://www.notion.so/b4b0506cecb94de9ae0b23930d6f7960" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span># https://github.com/espressif/esp-idf/blob/master/examples/peripherals/jpeg/jpeg_decode/open_raw_picture.py

# SPDX-FileCopyrightText: 2024 Espressif Systems (Shanghai) CO LTD
# SPDX-License-Identifier: Unlicense OR CC0-1.0
import argparse

import cv2 as cv
import numpy as np
from numpy.typing import NDArray


def open_picture(path):  # type: (str) -&gt; list[int]
    with open(path, &#x27;rb&#x27;) as f:
        data = f.read()
        f.close()
    new_data = [int(x) for x in data]
    return new_data


def picture_show_rgb888(data, h, w):  # type: (list[int], int, int) -&gt; None
    data = np.array(data).reshape(h, w, 3).astype(np.uint8)
    cv.imshow(&#x27;data&#x27;, data)
    cv.waitKey()


def picture_show_rgb565(data, h, w):  # type: (list[int], int, int) -&gt; None

    new_data = [0] * ((len(data) // 2) * 3)
    for i in range(len(data)):
        if i % 2 != 0:
            new_data[3 * (i - 1) // 2 + 2] = (data[i] &amp; 0xf8)
            new_data[3 * (i - 1) // 2 + 1] |= (data[i] &amp; 0x7) &lt;&lt; 5
        else:
            new_data[3 * i // 2] = (data[i] &amp; 0x1f) &lt;&lt; 3
            new_data[3 * i // 2 + 1] |= (data[i] &amp; 0xe0) &gt;&gt; 3

    new_data = np.array(new_data).reshape(h, w, 3).astype(np.uint8)
    cv.imshow(&#x27;data&#x27;, new_data)
    cv.waitKey()


def picture_show_gray(data, h, w):  # type: (list[int], int, int) -&gt; None
    new_data = np.array(data).reshape(h, w, 1).astype(np.uint8)
    cv.imshow(&#x27;data&#x27;, new_data)
    cv.waitKey()


def convert_YUV_to_RGB(Y, U, V):  # type: (NDArray, NDArray, NDArray) -&gt; tuple[NDArray, NDArray, NDArray]
    B = np.clip(Y + 1.7790 * (U - 128), 0, 255).astype(np.uint8)
    G = np.clip(Y - 0.3455 * (U - 128) - 0.7169 * (V - 128), 0, 255).astype(np.uint8)
    R = np.clip(Y + 1.4075 * (V - 128), 0, 255).astype(np.uint8)

    return B, G, R


def picture_show_yuv420(data, h, w):  # type: (list[int], int, int) -&gt; None
    new_u = [0] * (h * w)
    new_v = [0] * (h * w)
    new_y = [0] * (h * w)

    for i in range(int(h * w * 1.5)):
        is_even_row = ((i // (w * 1</span></span><span class="SemanticString"><span>.5)) % 2 == 0)
        if is_even_row:
            if (i % 3 == 0):
                new_u[(i // 3) * 2] = data[i]
                new_u[(i // 3) * 2 + 1] = data[i]
        else:
            if (i % 3 == 0):
                new_u[(i // 3) * 2] = new_u[int((i - (w * 1.5)) // 3) * 2]
                new_u[(i // 3) * 2 + 1] = new_u[int((i - (w * 1.5)) // 3) * 2 + 1]

    for i in range(int(h * w * 1.5)):
        if (i // (w * 1.5)) % 2 != 0 and (i % 3 == 0):
            idx = (i // 3) * 2
            new_v[idx] = data[i]
            new_v[idx + 1] = data[i]

    for i in range(int(h * w * 1.5)):
        if (i // (w * 1.5)) % 2 == 0 and (i % 3 == 0):
            idx = (i // 3) * 2
            new_v[idx] = new_v[int((i + (w * 1.5)) // 3) * 2]
            new_v[idx + 1] = new_v[int((i + (w * 1.5)) // 3) * 2 + 1]

    new_y = [data[i] for i in range(int(h * w * 1.5)) if i % 3 != 0]

    Y = np.array(new_y)
    U = np.array(new_u)
    V = np.array(new_v)

    B, G, R = convert_YUV_to_RGB(Y, U, V)
    # Merge channels
    new_data = np.stack((B, G, R), axis=-1)
    new_data = np.array(new_data).reshape(h, w, 3).astype(np.uint8)

    # Display the image
    cv.imshow(&#x27;data&#x27;, new_data)
    cv.waitKey()


def picture_show_yuv422(data, h, w):  # type: (list[int], int, int) -&gt; None
    # Reshape the input data to a 2D array
    data_array = np.array(data).reshape(h, w * 2)

    # Separate Y, U, and V channels
    Y = data_array[:, 1::2]
    U = data_array[:, 0::4].repeat(2, axis=1)
    V = data_array[:, 2::4].repeat(2, axis=1)

    # Convert YUV to RGB
    B, G, R = convert_YUV_to_RGB(Y, U, V)

    # Merge channels
    new_data = np.stack((B, G, R), axis=-1)

    # Display the image
    cv.imshow(&#x27;data&#x27;, new_data)
    cv.waitKey()


def picture_show_yuv444(data, h, w):  # type: (list[int], int, int) -&gt; None
    # Reshape the input data to a 2D array
    data_array = np.array(data).reshape(h, w * 3)

    # Separate Y, U, and V channels
    Y = data_array[:, 2::3]
    U = data_array</span></span><span class="SemanticString"><span>[:, 1::3]
    V = data_array[:, 0::3]

    # Convert YUV to RGB
    B, G, R = convert_YUV_to_RGB(Y, U, V)

    # Merge channels
    new_data = np.stack((B, G, R), axis=-1)

    # Display the image
    cv.imshow(&#x27;data&#x27;, new_data)
    cv.waitKey()


def main():  # type: () -&gt; None
    parser = argparse.ArgumentParser(description=&#x27;which mode need to show&#x27;)

    parser.add_argument(
        &#x27;--pic_path&#x27;,
        type=str,
        help=&#x27;What is the path of your picture&#x27;,
        required=True)

    parser.add_argument(
        &#x27;--pic_type&#x27;,
        type=str,
        help=&#x27;What type you want to show&#x27;,
        required=True,
        choices=[&#x27;rgb565&#x27;, &#x27;rgb888&#x27;, &#x27;gray&#x27;, &#x27;yuv422&#x27;, &#x27;yuv420&#x27;, &#x27;yuv444&#x27;])

    parser.add_argument(
        &#x27;--height&#x27;,
        type=int,
        help=&#x27;the picture height&#x27;,
        default=480)

    parser.add_argument(
        &#x27;--width&#x27;,
        type=int,
        help=&#x27;the picture width&#x27;,
        default=640)

    args = parser.parse_args()

    height = args.height
    width = args.width

    data = open_picture(args.pic_path)
    if (args.pic_type == &#x27;rgb565&#x27;):
        picture_show_rgb565(data, height, width)
    elif (args.pic_type == &#x27;rgb888&#x27;):
        picture_show_rgb888(data, height, width)
    elif (args.pic_type == &#x27;gray&#x27;):
        picture_show_gray(data, height, width)
    elif (args.pic_type == &#x27;yuv420&#x27;):
        picture_show_yuv420(data, height, width)
    elif (args.pic_type == &#x27;yuv422&#x27;):
        picture_show_yuv422(data, height, width)
    elif (args.pic_type == &#x27;yuv444&#x27;):
        picture_show_yuv444(data, height, width)
    else:
        print(&#x27;This type is not supported in this script!&#x27;)


if __name__ == &#x27;__main__&#x27;:
    main()</span></span></span></code></pre><div id="https://www.notion.so/0efd84218cd74e16a033c28bb6780995" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">除了软件解码外，esp32p4(目前只有该信号 MCU 支持) 也提供了 JPEG 的硬件编码和解码： </mark></span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32p4/api-reference/peripherals/jpeg.html"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">https://docs.espressif.com/projects/esp-idf/en/latest/esp32p4/api-reference/peripherals/jpeg.html</mark></a></span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/c13da3b9d6544fc3b0bd8075acc30dbf" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/espressif/esp-idf/blob/master/examples/peripherals/jpeg/jpeg_decode/README.md"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">硬件 jpeg decode</mark></a></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> （*.jpg -&gt; *.rgb，如 RGB888, RGB565）</mark></span></span></li><li id="https://www.notion.so/ca602ec4e07f40d49641de7b466aea08" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/espressif/esp-idf/blob/master/examples/peripherals/jpeg/jpeg_encode/README.md"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">硬件 jpeg encode</mark></a></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> (*.rgb -&gt; *.jpg)</mark></span></span></li></ol><div id="https://www.notion.so/320a8b1ced9d43918522cce07badb380" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">对应的 ESP32 JPEG 硬件 codec engine driver： </mark></span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/espressif/esp-idf/tree/master/components/esp_driver_jpeg"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">https://github.com/espressif/esp-idf/tree/master/components/esp_driver_jpeg</mark></a></span></span></p></div><div id="https://www.notion.so/1c543661ab8549d8a89708207d5edb6f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">其他 jpeg encode：</mark></span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/76524fc62c214cfcb5184afc79999b8d" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/bitbank2/JPEGENC"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">https://github.com/bitbank2/JPEGENC</mark></a></span></span></li><li id="https://www.notion.so/a2719d8860f947029b5a9f8b91b2dce7" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/tobozo/ESP32-Raytracer/tree/master"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">https://github.com/tobozo/ESP32-Raytracer/tree/master</mark></a></span></span></li><li id="https://www.notion.so/2c5228fd8fc14a0bbfc784b4cdfb8d70" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/espressif/esp-adf-libs/blob/master/esp_codec/include/codec/esp_jpeg_enc.h"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">https://github.com/espressif/esp-adf-libs/blob/master/esp_codec/include/codec/esp_jpeg_enc.h</mark></a></span></span><ul class="BulletedListWrapper"><li id="https://www.notion.so/97e60dcdc5dd444884408fad74f18a34" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">没有提供 C 源代码，只提供了头文件和 lib 库；</mark></span></span></li></ul></li></ol><h2 id="https://www.notion.so/4d1a7049c45d4886bacc0e0d7d6564fb" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/4d1a7049c45d4886bacc0e0d7d6564fb"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">5 显示 gif 图片 </mark></span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://blog.opsnull.com/rust-embedded/rust-esp32-lcd-picture/#%E6%98%BE%E7%A4%BA-gif-%E5%9B%BE%E7%89%87"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">#</mark></a></span></span></h2><div id="https://www.notion.so/7128669aaa554c79bc9a46b75ac2a311" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">使用 Rust tinygif 库和系统定时器来显示 GIF 图片：</mark></span></span></p></div><div id="https://www.notion.so/aa8b7b0d3be54d66bf4218c377cd8d9c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">Copy</mark></span></span></p></div><pre id="https://www.notion.so/3edef6211c234167b3225466c62c4597" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>// https://github.com/MabezDev/mkey/blob/main/firmware/src/main.rs
let image =
        tinygif::Gif::&lt;Rgb565&gt;::from_slice(include_bytes!(&quot;../Ferris-240x240.gif&quot;)).unwrap();
    let mut start = SystemTimer::now();
    let mut frames = 0;
    loop {
        for frame in image.frames() {
            let frame = Image::with_center(
                &amp;frame,
                Point::new(WIDTH as i32 / 2, (HEIGHT as i32 / 2) - 40),
            );
            frame.draw(pixels).unwrap();

            // TE_READY won&#x27;t get set until we mark that we&#x27;re ready to flush a buffer
            critical_section::with(|cs| {
                TE_READY.store(false, Ordering::SeqCst);
                TE.borrow_ref_mut(cs).as_mut().unwrap().clear_interrupt();
            });
            // wait for next sync
            while !TE_READY.load(Ordering::SeqCst) {}

            let pixels = unsafe {
                core::slice::from_raw_parts(
                    pixels.data().as_ptr() as *const u8,
                    pixels.data().len(),
                )
            };
            let now = SystemTimer::now();
            lcd_fill(&amp;mut spi, pixels);
            log::trace!(
                &quot;Time to fill display: {}ms&quot;,
                (SystemTimer::now() - now) / (SystemTimer::TICKS_PER_SECOND / 1024)
            );
            frames += 1;
            let now = SystemTimer::now();
            if now.wrapping_sub(start) &gt; SystemTimer::TICKS_PER_SECOND {
                start = now;
                log::info!(&quot;FPS: {}&quot;, frames);
                frames = 0;
            }
        }
    }</span></span></span></code></pre><h2 id="https://www.notion.so/308700da230e4d8b8bb72c7bce029e16" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/308700da230e4d8b8bb72c7bce029e16"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">6 使用 LVGL 显示图片 </mark></span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://blog.opsnull.com/rust-embedded/rust-esp32-lcd-picture/#%E4%BD%BF%E7%94%A8-lvgl-%E6%98%BE%E7%A4%BA%E5%9B%BE%E7%89%87"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">#</mark></a></span></span></h2><div id="https://www.notion.so/49794429c0df4374bee9613a2e340d72" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://docs.lvgl.io/8.2/widgets/core/img.html"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">https://docs.lvgl.io/8.2/widgets/core/img.html</mark></a></span></span></p></div><div id="https://www.notion.so/9dfacec494dc45e7a0e3f73fa28df6ae" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">Images are the basic object to display images from flash (as arrays) or from files. Images can display symbols (LV_SYMBOL_…) too.</mark></span></span></p></div><div id="https://www.notion.so/49b081062bdb4e0aa4fca38ced25c352" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">Using the Image decoder interface custom image formats can be supported as well.</mark></span></span></p></div><div id="https://www.notion.so/84611a920a9b4e39af9f68eec588bfac" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">Image source：To provide maximum flexibility, the source of the image can be:</mark></span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/4e2a9185e85644699b33829be7ab563f" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">a variable in code (a C array with the pixels).</mark></span></span></li><li id="https://www.notion.so/be81f9d056864af6911f4af2c5b19235" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">a file stored externally (e.g. on an SD card).</mark></span></span></li><li id="https://www.notion.so/9c875222f2cb42f5a6941cbc2ac414c4" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">a text with Symbols.</mark></span></span></li></ol><div id="https://www.notion.so/48a6fef9c786488ca7048f05f85f5444" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">To set the source of an image, use </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">lv_img_set_src(img, src).</code></mark></span></span></p></div><div id="https://www.notion.so/8b761e69826e4ac3bd654be7f984c6c8" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">To generate a pixel array from a PNG, JPG or BMP image, use the Online image converter tool and set the converted image with its pointer: </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">lv_img_set_src(img1, &amp;converted_img_var)</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">; To make the variable visible in the C file, you need to declare it with LV_IMG_DECLARE(converted_img_var).</mark></span></span></p></div><div id="https://www.notion.so/73d4f94cda2e4a578c0aba7a68d571ec" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">To use external files, you also need to convert the image files using the online converter tool but now you should select the binary output format. You also need to use LVGL’s file system module and register a driver with some functions for the basic file operation. Go to the File system to learn more. To set an image sourced from a file, use lv_img_set_src(img, “S:folder1/my_img.bin”).</mark></span></span></p></div><div id="https://www.notion.so/b0ecce131edd4154a7c8f3f1d81506ba" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">You can also set a symbol similarly to Labels. In this case, the image will be rendered as text according to the font specified in the style. It enables to use of light-weight monochrome “letters” instead of real images. You can set symbol like lv_img_set_src(img1, LV_SYMBOL_OK).</mark></span></span></p></div><h2 id="https://www.notion.so/51c0ccbe1f184734b2e3cbe3d9995465" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/51c0ccbe1f184734b2e3cbe3d9995465"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">7 使用 embeded-graphics 显示图片 </mark></span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://blog.opsnull.com/rust-embedded/rust-esp32-lcd-picture/#%E4%BD%BF%E7%94%A8-embeded-graphics-%E6%98%BE%E7%A4%BA%E5%9B%BE%E7%89%87"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">#</mark></a></span></span></h2><h2 id="https://www.notion.so/d8feca751ba040b6874eb94f6a98b0ba" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/d8feca751ba040b6874eb94f6a98b0ba"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">8 使用 slint 显示图片 </mark></span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://blog.opsnull.com/rust-embedded/rust-esp32-lcd-picture/#%E4%BD%BF%E7%94%A8-slint-%E6%98%BE%E7%A4%BA%E5%9B%BE%E7%89%87"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">#</mark></a></span></span></h2><div id="https://www.notion.so/f8922113c3c443e1aba27a2f48cd2a13" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">使用 image crate 可以将各种照片转换称 RGBA8 格式:</mark></span></span></p></div><div id="https://www.notion.so/86a247cda69e4d499290da6a427075e5" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">Copy</mark></span></span></p></div><pre id="https://www.notion.so/1cf9a15d19ae4bddbd26a4fe2ec5bd0d" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>let mut cat_image = image::open(&quot;cat.png&quot;).expect(&quot;Error loading cat image&quot;).into_rgba8();</span></span></span></code></pre><div id="https://www.notion.so/60a92edb55a14acebd8ca8da095e33d4" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">Integration with OpenCV #2480: </mark></span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/slint-ui/slint/discussions/2480"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">https://github.com/slint-ui/slint/discussions/2480</mark></a></span></span></p></div><div id="https://www.notion.so/a291a607dda7479f97a799a4112610a3" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">You would basically need to convert the pixel into </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">SharedPixelBuffer</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> and use the </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">slint::Image</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> constructor to convert it to an image. Then you can use </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">a property</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> to pass that image to the slint view.</mark></span></span></p></div><div id="https://www.notion.so/1742e03f61ff4f0cb82853c8664aae26" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">Copy</mark></span></span></p></div><pre id="https://www.notion.so/3aa0597ea98d4f859ca88cbd5f132271" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>export component View {
   in property &lt;image&gt; img &lt;=&gt; i.source;
   i := Image { }
}</span></span></span></code></pre><div id="https://www.notion.so/77e53a12d2914379a08d24bf4de30883" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">参考:</mark></span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/1108bec5cc554339a52bf4f6fdcbf6ca" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/opsnull/rust-slint-opencv"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">https://github.com/opsnull/rust-slint-opencv</mark></a></span></span></li><li id="https://www.notion.so/e8bb5767718140c3bca1c158c5f4a1f6" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://releases.slint.dev/1.5.1/docs/rust/slint/struct.image"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">https://releases.slint.dev/1.5.1/docs/rust/slint/struct.image</mark></a></span></span></li></ol><div id="https://www.notion.so/030bcb2818124e28b936b656af3a4a0d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">LCD 播放视频是通过连续播放静态图片来实现的，每张图片为一个 frame，播放图片的速率为 FPS。</mark></span></span></p></div><div id="https://www.notion.so/81ede548f6244ca0abe7e311bbd667d2" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">影响 LCD FPS 快慢的因素：</mark></span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/861a421ca89d47cabaa6e1e803429d5e" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">rendering：处理器生成一帧数据 image 数据的过程；</mark></span></span></li><li id="https://www.notion.so/fa615d7987944ecc9450b7c4569e31e8" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">transmission：处理其通过物理接口发送给 LCD 的速率，称为 interface frame rate；</mark></span></span></li><li id="https://www.notion.so/7e8d545cbd2e492cb1f2d9fef0de7a01" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">display：LCD 显示一帧图片的速率，称为 screen refresh rate；</mark></span></span></li></ol><div id="https://www.notion.so/faa182c7a5274dfeafe4dd87cc0ed491" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">interface 和 screen refresh rate 的关系：</mark></span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/440fbefc7b3d4cbeb985f60fc46d3f23" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">For LCDs with SPI/I80 interfaces, the screen refresh rate is determined by the </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">LCD driver IC</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> and can typically be set by sending specific commands, such as the ST7789 command FRCTRL2 (C6h).</mark></span></span></li><li id="https://www.notion.so/2c6e0320263b4ede97d09fcd4f038703" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">For LCDs with RGB interfaces, the screen refresh rate is determined by </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">the main controller</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> and is </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><code class="SemanticString__Fragment SemanticString__Fragment--Code">equivalent to</code></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> the interface frame rate.</mark></span></span></li></ol><div id="https://www.notion.so/535bbfd19b314242a0fadacdcf8d3055" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">RGB 接口是微控制器 driver 控制的数据发送&amp;传输；</mark></span></span></p></div><div id="https://www.notion.so/01843279a6af4c19ba9cadeab7c88058" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><ul id="https://www.notion.so/6e61916c4e344952bce51d2dacfc723b" class="ColorfulBlock ColorfulBlock--ColorGray TableOfContents"><li class="TableOfContents__Item"><a href="#https://www.notion.so/d9cac5a6d0e241149f1e33770327fd8e"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">1 显示 raw 图片 </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">#</mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/ece6f8c0a4d94e05841d327cbf2efb2f"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">2 显示 png 图片 </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">#</mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/0fa7bfd08b3a41abad808109e5bb9a77"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">3 显示 bmp 图片 </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">#</mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/0e91b468062f48f5ae7f36271c7332a3"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">4 显示 jpeg 图片 </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">#</mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/4d1a7049c45d4886bacc0e0d7d6564fb"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">5 显示 gif 图片 </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">#</mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/308700da230e4d8b8bb72c7bce029e16"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">6 使用 LVGL 显示图片 </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">#</mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/51c0ccbe1f184734b2e3cbe3d9995465"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">7 使用 embeded-graphics 显示图片 </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">#</mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/d8feca751ba040b6874eb94f6a98b0ba"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">8 使用 slint 显示图片 </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">#</mark></span></span></div></a></li></ul></article>
  <footer class="Footer">
  <div>
    &copy; 413’s Website 2020~2024
  </div>
  <div>
    &centerdot;
  </div>
  <div>
    Powered by
    <a href="https://github.com/syx-413" target="_blank" rel="noopener noreferrer"> notablog</a>.
  </div>
</footer>
</body>

</html>
