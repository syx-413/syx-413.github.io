<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- Chrome, Firefox OS and Opera Status Bar Color -->
<meta name="theme-color" content="#FFFFFF">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css">
<link rel="stylesheet" type="text/css"
  href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/themes/prism.min.css">
<link rel="stylesheet" type="text/css" href="css/SourceSansPro.css">
<link rel="stylesheet" type="text/css" href="css/theme.css">
<link rel="stylesheet" type="text/css" href="css/notablog.css">
<link rel="stylesheet" type="text/css" href="css/CustomSetting.css">
<!-- Favicon -->

  <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🥥&lt;/text&gt;&lt;/svg&gt;">

<style>
  :root {
    font-size: 20px;
  }
</style>
  <title>esp-rs 常见问题&nbsp;|&nbsp;413’s Website</title>
  <meta property="og:type" content="blog">
  <meta property="og:title" content="esp-rs 常见问题">
  
  
    <meta property="og:image" content="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🦀&lt;/text&gt;&lt;/svg&gt;">
  
  <style>
    .DateTagBar {
      margin-top: 1.0rem;
    }
  </style>
</head>

<body>
  <nav class="Navbar">
  <a href="index.html">
    <div class="Navbar__Btn">
      
      <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🥥&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
      
      <span>Home</span>
    </div>
  </a>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <span class="Navbar__Delim">&centerdot;</span>
  <a href="blog-collection.html">
    <div class="Navbar__Btn">
      
      <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🥅&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
      
      <span>blog mark</span>
    </div>
  </a>
  
  
  
  
  
  
  
  
  
  
  
  <span class="Navbar__Delim">&centerdot;</span>
  <a href="Note.html">
    <div class="Navbar__Btn">
      
      <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🎶&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
      
      <span>Note</span>
    </div>
  </a>
  
  
  
  
  
  
  
  <span class="Navbar__Delim">&centerdot;</span>
  <a href="reference.html">
    <div class="Navbar__Btn">
      
      <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;😷&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
      
      <span>杂项</span>
    </div>
  </a>
  
  
  
  <span class="Navbar__Delim">&centerdot;</span>
  <a href="About.html">
    <div class="Navbar__Btn">
      
      <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;😀&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
      
      <span>About</span>
    </div>
  </a>
  
  
</nav>
  <header class="Header">
    
    <div class="Header__Spacer Header__Spacer--NoCover">
    </div>
    
      <div class="Header__Icon">
        <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🦀&lt;/text&gt;&lt;/svg&gt;"></span>
      </div>
    
    <h1 class="Header__Title">esp-rs 常见问题</h1>
    
      <div class="DateTagBar">
        
          <span class="DateTagBar__Item DateTagBar__Date">Posted on Mon, Sep 2, 2024</span>
        
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--purple">
            <a href="tag/Rust.html">Rust</a>
          </span>
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--red">
            <a href="tag/单片机.html">单片机</a>
          </span>
        
      </div>
    
  </header>
    <div id="content-html"></div>
  <article id="https://www.notion.so/e50cb94726ac4ce7b5e7c07f27481b64" class="PageRoot"><h2 id="https://www.notion.so/dbd81b21b668417fb1bddd0aba4d27b7" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/dbd81b21b668417fb1bddd0aba4d27b7"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">在 esp-idf-template 生成的模板项目中执行 cargo build 报错:</mark></span></span></h2><ol class="NumberedListWrapper"><li id="https://www.notion.so/7b5a0f31d62e41fc84eb27d025b925f5" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/esp-rs/esp-idf-template/issues/165"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">https://github.com/esp-rs/esp-idf-template/issues/165</mark></a></span></span></li></ol><div id="https://www.notion.so/dcfffed330944be0b35c90bd5d6a531a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">Copy</mark></span></span></p></div><pre id="https://www.notion.so/6234f343e2d7412a82259149c78345f6" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>  Using managed esp-idf repository: RemoteSdk { repo_url: None, git_ref: Tag(&quot;v5.1.2&quot;) }
  Using esp-idf v5.1.2 at &#x27;/Users/zhangjun/codes/esp32/esp-demo/.embuild/espressif/esp-idf/v5.1.2&#x27;
  ERROR: /Users/zhangjun/codes/esp32/esp-demo/.embuild/espressif/espidf.constraints.v5.1.txt doesn&#x27;t exist. Perhaps you&#x27;ve forgotten to run the install scripts. Please check the installation guide for more information.
  CMake Error at /Users/zhangjun/codes/esp32/esp-demo/.embuild/espressif/esp-idf/v5.1.2/tools/cmake/build.cmake:363 (message):
    Some Python dependencies must be installed.  Check above message for
    details.
  Call Stack (most recent call first):
    /Users/zhangjun/codes/esp32/esp-demo/.embuild/espressif/esp-idf/v5.1.2/tools/cmake/build.cmake:498 (__build_check_python)
    /Users/zhangjun/codes/esp32/esp-demo/.embuild/espressif/esp-idf/v5.1.2/tools/cmake/project.cmake:547 (idf_build_process)
    CMakeLists.txt:28 (project)


  thread &#x27;main&#x27; panicked at /Users/zhangjun/.cargo/registry/src/index.crates.io-6f17d22bba15001f/cmake-0.1.50/src/lib.rs:1098:5:

  command did not execute successfully, got: exit status: 1

  build script failed, must exit now
  note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace</span></span></span></code></pre><div id="https://www.notion.so/76a2c569e3b349af8b8ab6df74c6a9ca" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">解决办法:</mark></span></span></p></div><div id="https://www.notion.so/00ad2f41d9d543a5bb0a1009aa4a6e86" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">Copy</mark></span></span></p></div><pre id="https://www.notion.so/c8df690c14664916a72e737c71d97164" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>cargo clean &amp;&amp; rm -rf .embuild &amp;&amp; cargo build</span></span></span></code></pre><h3 id="https://www.notion.so/5ebd3cd374d74a118c0626e28aba40aa" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/5ebd3cd374d74a118c0626e28aba40aa"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">报错: Missing dependencies for SOCKS support.</mark></span></span></h3><div id="https://www.notion.so/0dddc5930d24457a9b4eccd81859466c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">Copy</mark></span></span></p></div><pre id="https://www.notion.so/0bc96966af7e4c5bbf7ba5fe8678f246" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>  来自 https://github.com/ThrowTheSwitch/Unity
   * branch            7d2bf62b7e6afaf38153041a9d53c21aeeca9a25 -&gt; FETCH_HEAD
  ERROR: Could not install packages due to an OSError: Missing dependencies for SOCKS support.

  WARNING: There was an error checking the latest version of pip.
  Error: Command &#x27;[&#x27;/Users/zhangjun/codes/esp32/esp-demo/.embuild/espressif/python_env/idf5.1_py3.12_env/bin/python3&#x27;, &#x27;-m&#x27;, &#x27;pip&#x27;, &#x27;install&#x27;, &#x27;--upgrade&#x27;, &#x27;pip&#x27;]&#x27; returned non-zero exit status 1.
  Traceback (most recent call last):
    File &quot;/Users/zhangjun/codes/esp32/esp-demo/.embuild/espressif/esp-idf/v5.1.2/tools/idf_tools.py&quot;, line 2687, in &lt;module&gt;
      main(sys.argv[1:])
    File &quot;/Users/zhangjun/codes/esp32/esp-demo/.embuild/espressif/esp-idf/v5.1.2/tools/idf_tools.py&quot;, line 2679, in main
      action_func(args)
    File &quot;/Users/zhangjun/codes/esp32/esp-demo/.embuild/espressif/esp-idf/v5.1.2/tools/idf_tools.py&quot;, line 2098, in action_install_python_env
      subprocess.check_call([sys.executable, &#x27;-m&#x27;, &#x27;venv&#x27;,
    File &quot;/Users/zhangjun/.pyenv/versions/3.12.1/lib/python3.12/subprocess.py&quot;, line 413, in check_call
      raise CalledProcessError(retcode, cmd)
  subprocess.CalledProcessError: Command &#x27;[&#x27;/Users/zhangjun/.pyenv/versions/3.12.1/bin/python3&#x27;, &#x27;-m&#x27;, &#x27;venv&#x27;, &#x27;--clear&#x27;, &#x27;--upgrade-deps&#x27;, &#x27;/Users/zhangjun/codes/esp32/esp-demo/.embuild/espressif/python_env/idf5.1_py3.12_env&#x27;]&#x27; returned non-zero exit status 1.
  Error: Could not install esp-idf

  Caused by:
      command &#x27;env -u IDF_PYTHON_ENV_PATH -u MSYSTEM IDF_TOOLS_PATH=&quot;/Users/zhangjun/codes/esp32/esp-demo/.embuild/espressif&quot; &quot;python3&quot; &quot;/Users/zhangjun/codes/esp32/esp-demo/.embuild/espressif/esp-idf/v5.1.2/tools/idf_tools.py&quot; &quot;--idf-path&quot; &quot;/Users/zhangjun/codes/esp32/esp-demo/.embuild/espressif/esp-idf/v5.1.2&quot; &quot;--non-interactive&quot; &quot;install-python-env&quot;&#x27; exited with non-zero status code 1
zj@a:~/codes/esp32/esp-demo$</span></span></span></code></pre><div id="https://www.notion.so/a94672b3f7d549e7af52b981eeae88f1" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">解决办法: 不使用 socks5 代理, 而是使用 https/http 代理:</mark></span></span></p></div><div id="https://www.notion.so/32e64c1d07014f408db4eb3fba1b294d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><pre id="https://www.notion.so/c8462e2851624a39aa5e5d07ead460f7" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span># 将下列内容添加到 ~/esp/export.sh 和 ~/esp/export-esp.sh 中
export all_proxy=&quot;http://192.168.3.2:1080&quot; ALL_PROXY=&quot;http://192.168.3.2:1080&quot;

# 在 ~/.bashrc 中添加如下内容， 用于手动切换：
alias enable_http_proxy=&#x27;export all_proxy=&quot;http://192.168.3.2:1080&quot; ALL_PROXY=&quot;http://192.168.3.2:1080&quot;&#x27;
alias enable_socks_proxy=&#x27;export all_proxy=&quot;socks5h://192.168.3.2:1080&quot; ALL_PROXY=&quot;socks5h://192.168.3.2:1080&quot;&#x27;
alias disable_proxy=&#x27;unset all_proxy ALL_PROXY&#x27;</span></span></span></code></pre><h3 id="https://www.notion.so/1951903e30c24167976dff02972b65ac" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/1951903e30c24167976dff02972b65ac"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">rust-analyzer 报错，不能正常解析和补全。</mark></span></span></h3><div id="https://www.notion.so/8b66361195214e938c8fb42bf89eec21" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">解决办法：</mark></span></span></p></div><div id="https://www.notion.so/173144ca77e941768c9c80081c27ebbd" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">Copy</mark></span></span></p></div><pre id="https://www.notion.so/62d6f0f2391940829b4f72eea59176b7" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>zj@a:~/codes/esp32/esp-demo2/myesp$ cd

zj@a:~$ rustup component add rust-analyzer
info: downloading component &#x27;rust-analyzer&#x27;
info: installing component &#x27;rust-analyzer&#x27;

zj@a:~$ ls -l ~/.rustup/toolchains/
esp/                         nightly-x86_64-apple-darwin/

zj@a:~$ ls -l ~/.rustup/toolchains/nightly-x86_64-apple-darwin/bin/
total 95M
-rwxr-xr-x 1 zhangjun  29M  2  8 14:48 cargo*
-rwxr-xr-x 1 zhangjun 1.1M  2  8 14:48 cargo-clippy*
-rwxr-xr-x 1 zhangjun 1.5M  2  8 14:49 cargo-fmt*
-rwxr-xr-x 1 zhangjun  11M  2  8 14:48 clippy-driver*
-rwxr-xr-x 1 zhangjun  36M  2  8 16:57 rust-analyzer*
-rwxr-xr-x 1 zhangjun  980  2  8 14:48 rust-gdb*
-rwxr-xr-x 1 zhangjun 2.2K  2  8 14:49 rust-gdbgui*
-rwxr-xr-x 1 zhangjun 1.1K  2  8 14:48 rust-lldb*
-rwxr-xr-x 1 zhangjun 598K  2  8 14:49 rustc*
-rwxr-xr-x 1 zhangjun  11M  2  8 14:49 rustdoc*
-rwxr-xr-x 1 zhangjun 6.6M  2  8 14:49 rustfmt*

zj@a:~$ ln -sf ~/.rustup/toolchains/nightly-x86_64-apple-darwin/bin/rust-analyzer ~/.rustup/toolchains/esp/bin/rust-analyzer
z</span></span></span></code></pre><h3 id="https://www.notion.so/c95692e81495463eb0c6d808b4ec4120" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/c95692e81495463eb0c6d808b4ec4120"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">报错：warning: </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="mailto:esp-idf-sys@0.34.1">esp-idf-sys@0.34.1</a></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">: could not identify the root crate and `ESP_IDF_SYS_ROOT_CRATE` not specified。</mark></span></span></h3><div id="https://www.notion.so/885410831593434498a876a63f764fcf" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">这是因为同时 source 了 export.sh 和 export-esp.sh，当构建纯 Rust std/non_std 应用时，只需要 source export-esp.sh 即可。</mark></span></span></p></div><div id="https://www.notion.so/d9276cf032804d70b3ffc2e4878d9519" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">Copy</mark></span></span></p></div><pre id="https://www.notion.so/05ce001c5fbc4dbfa43c78063ab2330d" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>   zj@a:~/code/esp32/std$ source ~/esp/esp-idf/v5.2.1/export.sh
   zj@a:~/code/esp32/std$ source ~/esp/export-esp.sh

   zj@a:~/code/esp32/std$ cargo build
   warning: profiles for the non root package will be ignored, specify profiles at the workspace root:
   package:   /Users/alizj/code/esp32/std/myesp/Cargo.toml
   workspace: /Users/alizj/code/esp32/std/Cargo.toml
   warning: profiles for the non root package will be ignored, specify profiles at the workspace root:
   package:   /Users/alizj/code/esp32/std/myespv2/Cargo.toml
   workspace: /Users/alizj/code/esp32/std/Cargo.toml
   warning: profiles for the non root package will be ignored, specify profiles at the workspace root:
   package:   /Users/alizj/code/esp32/std/myespv3/Cargo.toml
   workspace: /Users/alizj/code/esp32/std/Cargo.toml
   warning: profiles for the non root package will be ignored, specify profiles at the workspace root:
   package:   /Users/alizj/code/esp32/std/myespv4/Cargo.toml
   workspace: /Users/alizj/code/esp32/std/Cargo.toml
   Compiling esp-idf-sys v0.34.1
   The following warnings were emitted during compilation:

   warning: esp-idf-sys@0.34.1: could not identify the root crate and `ESP_IDF_SYS_ROOT_CRATE` not specified

   error: failed to run custom build command for `esp-idf-sys v0.34.1`

   Caused by:
   process didn&#x27;t exit successfully: `/Users/alizj/code/esp32/std/target/debug/build/esp-idf-sys-eac13132720836e4/build-script-build` (exit status: 101)
     --- stdout
     cargo:rerun-if-env-changed=ESP_IDF_TOOLS_INSTALL_DIR
     cargo:rerun-if-env-changed=ESP_IDF_SDKCONFIG
     cargo:rerun-if-env-changed=ESP_IDF_SDKCONFIG_DEFAULTS
     cargo:rerun-if-env-changed=MCU</span></span></span></code></pre><div id="https://www.notion.so/b92b6ddb06d443f590b317eb5bdec8b6" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><ul id="https://www.notion.so/b716e3cfb43140fd8c1edae65fe47b3e" class="ColorfulBlock ColorfulBlock--ColorGray TableOfContents"><li class="TableOfContents__Item"><a href="#https://www.notion.so/dbd81b21b668417fb1bddd0aba4d27b7"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">在 esp-idf-template 生成的模板项目中执行 cargo build 报错:</mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/5ebd3cd374d74a118c0626e28aba40aa"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">报错: Missing dependencies for SOCKS support.</mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/1951903e30c24167976dff02972b65ac"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">rust-analyzer 报错，不能正常解析和补全。</mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/c95692e81495463eb0c6d808b4ec4120"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">报错：warning: </mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">esp-idf-sys@0.34.1</mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault">: could not identify the root crate and `ESP_IDF_SYS_ROOT_CRATE` not specified。</mark></span></span></div></a></li></ul></article>
    <aside class="Aside">
        <a href="#content-html"><div id="up">👆</div></a>
        <a href="#message-board"><div id="down">👇</div></a>
    </aside>
    <div id="message-board"></div>
    <script src="https://utteranc.es/client.js"
        repo="syx-413/syx-413.github.io"
        issue-term="pathname"
        theme="boxy-light"
        crossorigin="anonymous"
        async>
    </script>
    
  <footer class="Footer">
  <div>
    &copy; 413’s Website 2020~2024
  </div>
  <div>
    &centerdot;
  </div>
  <div>
    Powered by
    <a href="https://github.com/syx-413" target="_blank" rel="noopener noreferrer"> notablog</a>.
  </div>
</footer>
</body>

</html>